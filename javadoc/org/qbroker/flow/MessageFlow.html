<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Jul 13 07:39:54 EDT 2019 -->
<title>MessageFlow</title>
<meta name="date" content="2019-07-13">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MessageFlow";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/flow/GenericRequester.html" title="class in org.qbroker.flow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/flow/MonitorAgent.html" title="class in org.qbroker.flow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/flow/MessageFlow.html" target="_top">Frames</a></li>
<li><a href="MessageFlow.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.flow</div>
<h2 title="Class MessageFlow" class="title">Class MessageFlow</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.qbroker.flow.MessageFlow</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MessageFlow</span>
extends java.lang.Object
implements java.lang.Runnable</pre>
<div class="block">MessageFlow is a message-driven application with a group of inter-linked
 message nodes.  Each message node is well designed for certain purpose.
 It is running in a separate thread and communicates with the linked nodes
 via the internal queues.  There are three types of message nodes,
 MessageReceiver, MessageNode and MessagePersister.  The nodes of
 MessageReceiver and MessagePersister are for JMSMessage I/O.  The nodes of
 MessageNode are for JMSMessage processing.  With these three basic types of
 nodes, you can build a message flow for various purposes, just like you can
 build objects with Lego components.  For the I/O nodes, MessageFlow uses
 them to pick up or deliver messages via various transports, like JMS, TCP
 Socket, FTP, HTTP, JDBC, Serial Port, UDP Packet, SYSLOG, etc.  It is also
 expandable and extensible by implementing new message nodes.
<br/><br/>
 Between two linked message nodes, there is a communication channel for them
 to transport JMSMessages internally.  MessageFlow uses XQueue for the
 inter-node communications.  As an instance of XQueue, also called a link,
 it supports both FIFO and transactions.  A MessageFlow can have at least
 one link for the minimum of two nodes.  The properties of a link, like
 Capacity and XAMode, are always determined by a linked node of MessageNode
 type.  If there is no MessageNode on the link, the properties of the link
 will be determined by the default values of MessageFlow.  If the nodes at
 both ends of the link are type of MessageNode, the node at the sending
 side wins.  Among all the links, root is a special link.  For example,
 the root link controls the XAMode of all other links.  XAMode and Capacity
 of MessageFlow are used only as the default values.  For a node of either
 MessageReceiver or MessagePersister, its XAMode only determines its JMS
 Transaction type.
<br/><br/>
 MessageFlow supports the escalation channel for message nodes to escalate
 messages to the container or the caller.  Its name of "escalation" is a
 reserved name and it can only be used in MessageNodes as an outLink with
 its partition specified explicitly.
<br/><br/>
 MessageFlow supports the static ConfigTemplate for both Receiver and
 Persister. It means a list of persisters or receivers can share the same
 configuration template. But it does not allow duplicated names for either
 generated persisters or generated recievers.
<br/><br/>
 FLOW_READY    initialized and ready to work<br/>
 FLOW_RUNNING  running normally<br/>
 FLOW_RETRYING trying to get back to running state<br/>
 FLOW_PAUSE    pausing for a bit while still running<br/>
 FLOW_STANDBY  standby for a bit longer while still running<br/>
 FLOW_DISABLED flow is disabled<br/>
 FLOW_STOPPED  all threads stopped, can be restart later<br/>
 FLOW_CLOSED   end of life time, is not runable any more<br/>
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_CLOSED">FLOW_CLOSED</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_DISABLED">FLOW_DISABLED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_PAUSE">FLOW_PAUSE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_READY">FLOW_READY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_RETRYING">FLOW_RETRYING</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_RUNNING">FLOW_RUNNING</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_STANDBY">FLOW_STANDBY</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#FLOW_STOPPED">FLOW_STOPPED</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_COUNT">GROUP_COUNT</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_HBEAT">GROUP_HBEAT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_ID">GROUP_ID</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_RETRY">GROUP_RETRY</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_SIZE">GROUP_SIZE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_SPAN">GROUP_SPAN</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_STATUS">GROUP_STATUS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_TID">GROUP_TID</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_TIME">GROUP_TIME</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_TIMEOUT">GROUP_TIMEOUT</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#GROUP_TYPE">GROUP_TYPE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#MF_NODE">MF_NODE</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#MF_PSTR">MF_PSTR</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#MF_RCVR">MF_RCVR</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#MessageFlow(java.util.Map)">MessageFlow</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#MessageFlow(java.util.Map, org.qbroker.common.XQueue)">MessageFlow</a></strong>(java.util.Map&nbsp;props,
           <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;escalation)</code>
<div class="block">Creates new MessageFlow</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#demote()">demote</a></strong>()</code>
<div class="block">demotes the flow from the current status to its default status</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#diff(java.util.Map)">diff</a></strong>(java.util.Map&nbsp;props)</code>
<div class="block">It returns a Map with only modified or new props.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#disable()">disable</a></strong>()</code>
<div class="block">disables the flow from the current status to the disabled status</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#enable()">enable</a></strong>()</code>
<div class="block">enables the disabled flow to its previous status</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getDebugMode()">getDebugMode</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getDefaultStatus()">getDefaultStatus</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getName()">getName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getNumberOfNodes(int)">getNumberOfNodes</a></strong>(int&nbsp;type)</code>
<div class="block">returns number of nodes of the specific type</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getNumberOfXQueues()">getNumberOfXQueues</a></strong>()</code>
<div class="block">returns number of XQueues of the flow</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getOperation()">getOperation</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getPartition()">getPartition</a></strong>()</code>
<div class="block">returns partition of root queue for external requests</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getRootQueue()">getRootQueue</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#getStatus()">getStatus</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#hasMajorChange(java.util.Map)">hasMajorChange</a></strong>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change)</code>
<div class="block">It takes the Map returned from diff() and analizes what have been
 changed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#ingest(java.lang.String, javax.jms.Message)">ingest</a></strong>(java.lang.String&nbsp;key,
      javax.jms.Message&nbsp;msg)</code>
<div class="block">It ingests the message into the XQueue with the name of key and
 returns the id upon success.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#initNode(java.util.Map, java.lang.String)">initNode</a></strong>(java.util.Map&nbsp;props,
        java.lang.String&nbsp;prefix)</code>
<div class="block">It instantiates a node object from the given props and returns the object
 upon success.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#list(int)">list</a></strong>(int&nbsp;type)</code>
<div class="block">returns a text of list with all nodes in either JSON or XML</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#promote()">promote</a></strong>()</code>
<div class="block">promotes the flow from the current status to running status</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Map&lt;java.lang.String,java.lang.String&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#queryInfo(long, long, java.lang.String, java.lang.String, int)">queryInfo</a></strong>(long&nbsp;currentTime,
         long&nbsp;sessionTime,
         java.lang.String&nbsp;target,
         java.lang.String&nbsp;key,
         int&nbsp;type)</code>
<div class="block">returns a Map containing queried information according to the result type</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#refreshRules(java.lang.String)">refreshRules</a></strong>(java.lang.String&nbsp;key)</code>
<div class="block">It refreshes the external rules on all the nodes contains the rule
 with the given name and returns the number of external rulesets updated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#reload(java.util.Map)">reload</a></strong>(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change)</code>
<div class="block">It reloads the changes for the entire flow and returns the number of
 failures.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#run()">run</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#setDebugMode(int)">setDebugMode</a></strong>(int&nbsp;debug)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#show(java.lang.String, int, int)">show</a></strong>(java.lang.String&nbsp;key,
    int&nbsp;id,
    int&nbsp;type)</code>
<div class="block">returns the display text on the message at the cell id of the queue</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#showChange(java.lang.String, java.lang.String, java.util.Map, boolean)">showChange</a></strong>(java.lang.String&nbsp;prefix,
          java.lang.String&nbsp;base,
          java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change,
          boolean&nbsp;detail)</code>
<div class="block">It loggs the details of the change returned by diff()</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#start()">start</a></strong>()</code>
<div class="block">starts all threads and/or nodes</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#stop()">stop</a></strong>()</code>
<div class="block">stops all nodes and the threads</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>javax.jms.Message</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MessageFlow.html#takeback(java.lang.String, int)">takeback</a></strong>(java.lang.String&nbsp;key,
        int&nbsp;id)</code>
<div class="block">takes back the message at the cell of id from the queue</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MF_RCVR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MF_RCVR</h4>
<pre>public static final&nbsp;int MF_RCVR</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.MF_RCVR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MF_NODE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MF_NODE</h4>
<pre>public static final&nbsp;int MF_NODE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.MF_NODE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MF_PSTR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MF_PSTR</h4>
<pre>public static final&nbsp;int MF_PSTR</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.MF_PSTR">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_ID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_ID</h4>
<pre>public static final&nbsp;int GROUP_ID</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_ID">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_TID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_TID</h4>
<pre>public static final&nbsp;int GROUP_TID</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_TID">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_TYPE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_TYPE</h4>
<pre>public static final&nbsp;int GROUP_TYPE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_TYPE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_SIZE</h4>
<pre>public static final&nbsp;int GROUP_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_HBEAT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_HBEAT</h4>
<pre>public static final&nbsp;int GROUP_HBEAT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_HBEAT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_TIMEOUT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_TIMEOUT</h4>
<pre>public static final&nbsp;int GROUP_TIMEOUT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_TIMEOUT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_STATUS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_STATUS</h4>
<pre>public static final&nbsp;int GROUP_STATUS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_STATUS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_COUNT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_COUNT</h4>
<pre>public static final&nbsp;int GROUP_COUNT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_COUNT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_SPAN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_SPAN</h4>
<pre>public static final&nbsp;int GROUP_SPAN</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_SPAN">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_RETRY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_RETRY</h4>
<pre>public static final&nbsp;int GROUP_RETRY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_RETRY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="GROUP_TIME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>GROUP_TIME</h4>
<pre>public static final&nbsp;int GROUP_TIME</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.GROUP_TIME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_READY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_READY</h4>
<pre>public static final&nbsp;int FLOW_READY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_READY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_RUNNING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_RUNNING</h4>
<pre>public static final&nbsp;int FLOW_RUNNING</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_RUNNING">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_RETRYING">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_RETRYING</h4>
<pre>public static final&nbsp;int FLOW_RETRYING</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_RETRYING">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_PAUSE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_PAUSE</h4>
<pre>public static final&nbsp;int FLOW_PAUSE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_PAUSE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_STANDBY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_STANDBY</h4>
<pre>public static final&nbsp;int FLOW_STANDBY</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_STANDBY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_DISABLED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_DISABLED</h4>
<pre>public static final&nbsp;int FLOW_DISABLED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_DISABLED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_STOPPED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FLOW_STOPPED</h4>
<pre>public static final&nbsp;int FLOW_STOPPED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_STOPPED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FLOW_CLOSED">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FLOW_CLOSED</h4>
<pre>public static final&nbsp;int FLOW_CLOSED</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.flow.MessageFlow.FLOW_CLOSED">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MessageFlow(java.util.Map, org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MessageFlow</h4>
<pre>public&nbsp;MessageFlow(java.util.Map&nbsp;props,
           <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;escalation)</pre>
<div class="block">Creates new MessageFlow</div>
</li>
</ul>
<a name="MessageFlow(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MessageFlow</h4>
<pre>public&nbsp;MessageFlow(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">starts all threads and/or nodes</div>
</li>
</ul>
<a name="stop()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>stop</h4>
<pre>public&nbsp;void&nbsp;stop()</pre>
<div class="block">stops all nodes and the threads</div>
</li>
</ul>
<a name="enable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>enable</h4>
<pre>public&nbsp;int&nbsp;enable()</pre>
<div class="block">enables the disabled flow to its previous status</div>
</li>
</ul>
<a name="disable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disable</h4>
<pre>public&nbsp;int&nbsp;disable()</pre>
<div class="block">disables the flow from the current status to the disabled status</div>
</li>
</ul>
<a name="promote()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>promote</h4>
<pre>public&nbsp;int&nbsp;promote()</pre>
<div class="block">promotes the flow from the current status to running status</div>
</li>
</ul>
<a name="demote()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>demote</h4>
<pre>public&nbsp;int&nbsp;demote()</pre>
<div class="block">demotes the flow from the current status to its default status</div>
</li>
</ul>
<a name="ingest(java.lang.String, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ingest</h4>
<pre>public&nbsp;int&nbsp;ingest(java.lang.String&nbsp;key,
         javax.jms.Message&nbsp;msg)</pre>
<div class="block">It ingests the message into the XQueue with the name of key and
 returns the id upon success.  Otherwise, it returns -1. It assumes
 that the 2nd half of cells for the XQueue are not used.</div>
</li>
</ul>
<a name="show(java.lang.String, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>show</h4>
<pre>public&nbsp;java.lang.String&nbsp;show(java.lang.String&nbsp;key,
                    int&nbsp;id,
                    int&nbsp;type)</pre>
<div class="block">returns the display text on the message at the cell id of the queue</div>
</li>
</ul>
<a name="takeback(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takeback</h4>
<pre>public&nbsp;javax.jms.Message&nbsp;takeback(java.lang.String&nbsp;key,
                         int&nbsp;id)</pre>
<div class="block">takes back the message at the cell of id from the queue</div>
</li>
</ul>
<a name="queryInfo(long, long, java.lang.String, java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>queryInfo</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,java.lang.String&gt;&nbsp;queryInfo(long&nbsp;currentTime,
                                                         long&nbsp;sessionTime,
                                                         java.lang.String&nbsp;target,
                                                         java.lang.String&nbsp;key,
                                                         int&nbsp;type)</pre>
<div class="block">returns a Map containing queried information according to the result type</div>
</li>
</ul>
<a name="list(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;java.lang.String&nbsp;list(int&nbsp;type)</pre>
<div class="block">returns a text of list with all nodes in either JSON or XML</div>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
</li>
</ul>
<a name="getOperation()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
</li>
</ul>
<a name="getStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatus</h4>
<pre>public&nbsp;int&nbsp;getStatus()</pre>
</li>
</ul>
<a name="getDefaultStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultStatus</h4>
<pre>public&nbsp;int&nbsp;getDefaultStatus()</pre>
</li>
</ul>
<a name="getDebugMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDebugMode</h4>
<pre>public&nbsp;int&nbsp;getDebugMode()</pre>
</li>
</ul>
<a name="setDebugMode(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebugMode</h4>
<pre>public&nbsp;void&nbsp;setDebugMode(int&nbsp;debug)</pre>
</li>
</ul>
<a name="getRootQueue()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootQueue</h4>
<pre>public&nbsp;<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;getRootQueue()</pre>
</li>
</ul>
<a name="getPartition()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPartition</h4>
<pre>public&nbsp;int[]&nbsp;getPartition()</pre>
<div class="block">returns partition of root queue for external requests</div>
</li>
</ul>
<a name="getNumberOfNodes(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfNodes</h4>
<pre>public&nbsp;int&nbsp;getNumberOfNodes(int&nbsp;type)</pre>
<div class="block">returns number of nodes of the specific type</div>
</li>
</ul>
<a name="getNumberOfXQueues()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNumberOfXQueues</h4>
<pre>public&nbsp;int&nbsp;getNumberOfXQueues()</pre>
<div class="block">returns number of XQueues of the flow</div>
</li>
</ul>
<a name="refreshRules(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refreshRules</h4>
<pre>public&nbsp;int&nbsp;refreshRules(java.lang.String&nbsp;key)</pre>
<div class="block">It refreshes the external rules on all the nodes contains the rule
 with the given name and returns the number of external rulesets updated.</div>
</li>
</ul>
<a name="reload(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reload</h4>
<pre>public&nbsp;int&nbsp;reload(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change)</pre>
<div class="block">It reloads the changes for the entire flow and returns the number of
 failures.</div>
</li>
</ul>
<a name="diff(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>diff</h4>
<pre>public&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;diff(java.util.Map&nbsp;props)</pre>
<div class="block">It returns a Map with only modified or new props.  The deleted
 items will be set to null in the returned Map.  If the container
 has been changed, it will be reflected by the object keyed by base.</div>
</li>
</ul>
<a name="hasMajorChange(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasMajorChange</h4>
<pre>public&nbsp;boolean&nbsp;hasMajorChange(java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change)</pre>
<div class="block">It takes the Map returned from diff() and analizes what have been
 changed.  If the Map contains major changes that require to stop
 or disable the flow, it returns true.  Otherwise, it returns false to
 indicate the reload of the flow is good enough.</div>
</li>
</ul>
<a name="showChange(java.lang.String, java.lang.String, java.util.Map, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>showChange</h4>
<pre>public&nbsp;void&nbsp;showChange(java.lang.String&nbsp;prefix,
              java.lang.String&nbsp;base,
              java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;change,
              boolean&nbsp;detail)</pre>
<div class="block">It loggs the details of the change returned by diff()</div>
</li>
</ul>
<a name="initNode(java.util.Map, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initNode</h4>
<pre>public static&nbsp;java.lang.Object&nbsp;initNode(java.util.Map&nbsp;props,
                        java.lang.String&nbsp;prefix)</pre>
<div class="block">It instantiates a node object from the given props and returns the object
 upon success.  In case of failure, it returns the exception.</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/flow/GenericRequester.html" title="class in org.qbroker.flow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/flow/MonitorAgent.html" title="class in org.qbroker.flow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/flow/MessageFlow.html" target="_top">Frames</a></li>
<li><a href="MessageFlow.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
