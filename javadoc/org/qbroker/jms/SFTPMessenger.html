<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_112) on Sat Nov 23 10:18:02 EST 2019 -->
<title>SFTPMessenger</title>
<meta name="date" content="2019-11-23">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="SFTPMessenger";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/RMQMessenger.html" title="class in org.qbroker.jms"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/qbroker/jms/SNMPMessenger.html" title="class in org.qbroker.jms"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/SFTPMessenger.html" target="_top">Frames</a></li>
<li><a href="SFTPMessenger.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.qbroker.net.SFTPConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.jms</div>
<h2 title="Class SFTPMessenger" class="title">Class SFTPMessenger</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/net/SFTPConnector.html" title="class in org.qbroker.net">org.qbroker.net.SFTPConnector</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.jms.SFTPMessenger</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/qbroker/common/Connector.html" title="interface in org.qbroker.common">Connector</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">SFTPMessenger</span>
extends <a href="../../../org/qbroker/net/SFTPConnector.html" title="class in org.qbroker.net">SFTPConnector</a></pre>
<div class="block">SFTPMessenger connects to a SSH server and initializes one of the operations,
 such as retrieve, download and store.  It carries out the operation with
 JMS Messages.
<br/><br/>
 There are seven methods, retrieve(), download(), list(), store(), copy(),
 upload() and pickup().  The first method, retrieve(), is used to retrieve
 files from SSH servers. The method of download() is used for synchronous
 requests.  The method of store() is used for asynchronous storing content
 to remote SSH servers. The method of copy() is for copying a file from
 one SSH server to anther. Both upload() and pickup() are for large file
 transfers with JobPersister.
<br/><br/>
 This is NOT MT-Safe.  Therefore, you need to use multiple instances to
 achieve your MT goal.
<br/></div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>yannanlu@yahoo.com</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.org.qbroker.net.SFTPConnector">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/SFTPConnector.html" title="class in org.qbroker.net">SFTPConnector</a></h3>
<code><a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_CWD">ACTION_CWD</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_DEL">ACTION_DEL</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_GET">ACTION_GET</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_LIST">ACTION_LIST</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_MKD">ACTION_MKD</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_PUT">ACTION_PUT</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_PWD">ACTION_PWD</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_RMD">ACTION_RMD</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_SIZE">ACTION_SIZE</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#ACTION_TIME">ACTION_TIME</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#FTP_ALL">FTP_ALL</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#FTP_DIRECTORY">FTP_DIRECTORY</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#FTP_FILE">FTP_FILE</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#FTP_LINK">FTP_LINK</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#FTP_UNKNOWN">FTP_UNKNOWN</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#uri">uri</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#SFTPMessenger-java.util.Map-">SFTPMessenger</a></span>(java.util.Map&nbsp;props)</code>
<div class="block">Creates new SFTPMessenger</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#copy-org.qbroker.common.XQueue-">copy</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS Message from the XQueue and retrieves the property map in
 JSON from its body.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#download-org.qbroker.common.XQueue-">download</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from xq that contains a filename to be downloaded
 and downloads the file via sftp.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#getOperation--">getOperation</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#list-org.qbroker.common.XQueue-">list</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from xq that contains a dirname for listing files
 in it and gets the list via sftp.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#pickup-org.qbroker.common.XQueue-">pickup</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from the uplink as the file transfer request that
 is either an init request for the file transfer or a query request for
 the progress of the file transfer.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#retrieve-org.qbroker.common.XQueue-">retrieve</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">retrieve a file from sftp server and put it to an XQ</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#store-org.qbroker.common.XQueue-">store</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS Message from the XQueue and stores its body into a remote
 file via sftp continuously.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../org/qbroker/jms/SFTPMessenger.html#upload-org.qbroker.common.XQueue-">upload</a></span>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from the uplink as the file transfer request that
 is either an init request for the file transfer or a query request for
 the progress of the file transfer.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.org.qbroker.net.SFTPConnector">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/SFTPConnector.html" title="class in org.qbroker.net">SFTPConnector</a></h3>
<code><a href="../../../org/qbroker/net/SFTPConnector.html#close--">close</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#connect--">connect</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#createDirectory-java.lang.String-int-">createDirectory</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#getChannelSftp--">getChannelSftp</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#getParent-java.lang.String-">getParent</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#getSize-java.lang.String-">getSize</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#getTimestamp-java.lang.String-">getTimestamp</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#getURI--">getURI</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#isConnected--">isConnected</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#main-java.lang.String:A-">main</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#reconnect--">reconnect</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#retrieveFileStream-java.lang.String-">retrieveFileStream</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpCwd-java.lang.String-">sftpCwd</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpDelete-java.lang.String-">sftpDelete</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpGet-java.io.File-java.lang.String-">sftpGet</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpGet-java.io.OutputStream-java.lang.String-">sftpGet</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpGet-java.lang.StringBuffer-java.lang.String-">sftpGet</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpList-java.lang.String-int-">sftpList</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpMkd-java.lang.String-">sftpMkd</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpPut-java.io.File-java.lang.String-">sftpPut</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpPut-java.io.InputStream-java.lang.String-">sftpPut</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpPut-java.lang.String-java.lang.String-">sftpPut</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpPwd--">sftpPwd</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#sftpRmd-java.lang.String-">sftpRmd</a>, <a href="../../../org/qbroker/net/SFTPConnector.html#storeFileStream-java.lang.String-">storeFileStream</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SFTPMessenger-java.util.Map-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SFTPMessenger</h4>
<pre>public&nbsp;SFTPMessenger(java.util.Map&nbsp;props)
              throws com.jcraft.jsch.JSchException</pre>
<div class="block">Creates new SFTPMessenger</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>com.jcraft.jsch.JSchException</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="retrieve-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieve</h4>
<pre>public&nbsp;void&nbsp;retrieve(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
              throws java.io.IOException,
                     javax.jms.JMSException</pre>
<div class="block">retrieve a file from sftp server and put it to an XQ</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="download-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>download</h4>
<pre>public&nbsp;void&nbsp;download(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
              throws java.io.IOException,
                     <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                     javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from xq that contains a filename to be downloaded
 and downloads the file via sftp.  If LocalStore is defined in the
 message, the downloaded file will be stored into the local filename.
 Otherwise, the content of the file will be put into the message body.
 The message will be removed from the XQueue so that the requester at
 the other end of the XQueue can easily process the content either out of
 the local filename or out of the message.
<br/><br/>
 Since the download operation relies on a request, this method will  
 intercept the request and processes it. The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the download is successful.  Otherwise, the
 download operation is failed. No matter what happens, it will not
 acknowledge the message.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="upload-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>upload</h4>
<pre>public&nbsp;void&nbsp;upload(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
            throws java.io.IOException,
                   <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                   javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from the uplink as the file transfer request that
 is either an init request for the file transfer or a query request for
 the progress of the file transfer. In case of the init file transfer
 request, it initializes the transfer job and starts to transfer the
 file. Meanwhile, it continues to listen to the xq for query request
 or other commands on the transfer job. For each query request, it
 loads the progress data and the status to the message and removes
 the message from the uplink so that the other end is able to collect it.
 When the transfer job completes, it cleans up the transfer job and
 acknowledges the init message before removing it from the uplink. In case
 that the incoming request is to abort the current transfer job, it will
 stop the transfer process and cleans up the job. The init message will
 be acknowledged and removed from the uplink.
<br/><br/>
 Since the upload operation relies on requests, the method will intercept
 the requests and processes them.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the upload is successful.  Otherwise, the message
 body will contain the failure reason out of upload operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="pickup-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pickup</h4>
<pre>public&nbsp;void&nbsp;pickup(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
            throws java.io.IOException,
                   <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                   javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from the uplink as the file transfer request that
 is either an init request for the file transfer or a query request for
 the progress of the file transfer. In case of the init file transfer
 request, it initializes the transfer job and starts to transfer the
 file. Meanwhile, it continues to listen to the xq for query request
 or other commands on the transfer job. For each query request, it
 loads the progress data and the status to the message and removes
 the message from the uplink so that the other end is able to collect it.
 When the transfer job completes, it cleans up the transfer job and
 acknowledges the init message before removing it from the uplink. In case
 that the incoming request is to abort the current transfer job, it will
 stop the transfer process and cleans up the job. The init message will
 be acknowledged and removed from the uplink.
<br/><br/>
 Since the pickup operation relies on requests, the method will intercept
 the requests and processes them.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the pickup is successful.  Otherwise, the message
 body will contain the failure reason out of upload operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="list-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;void&nbsp;list(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
          throws java.io.IOException,
                 <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                 javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from xq that contains a dirname for listing files
 in it and gets the list via sftp.  It puts the list of files into the
 message body one name per line and sends it back.  The requester at the
 other end of the XQueue can easily read the list out of the message.
<br/><br/>
 Since the list operation relies on a request, this method will  
 intercept the request and process it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the list is successful.  Otherwise, the
 message body will not contain the content out of the list operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="store-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>public&nbsp;void&nbsp;store(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
           throws java.io.IOException,
                  <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                  javax.jms.JMSException</pre>
<div class="block">It gets a JMS Message from the XQueue and stores its body into a remote
 file via sftp continuously.
<br/><br/>
 It will always try to retrieve the URL from the field specified by
 FieldName property.  If the message does not contain the URL, the method
 will use the default URL defined by URI property.
<br/><br/>
 It also supports LocalStore feature so that it will read the content
 from the local file and stores the file to the remote filesystem.
 If the local file is a directory, it will transfer all the files
 and subdirectories to remote filesystem.  In this case, there is no
 guarantee on the file transfer.
<br/><br/>
 The store operation also supports the requests.  If the XAMode has
 enabled the XA_CLIENT bit, it will treat the message as a request from
 the uplink.  In this case, the incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is supposed to
 check the value of the property once it gets the message back.  If
 the return code is 0, the operation is successful.  Otherwise, the
 request will be dropped due to failures.  On the other hand, if the
 XA_CLIENT bit has been disabled by XAMode, the incoming message will
 not be modified.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.
<br/><br/>
 If the XQueue has enabled the EXTERNAL_XA bit, it will also acknowledge
 the messages.  This method is MT-Safe.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="copy-org.qbroker.common.XQueue-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copy</h4>
<pre>public&nbsp;void&nbsp;copy(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
          throws java.io.IOException,
                 <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                 javax.jms.JMSException</pre>
<div class="block">It gets a JMS Message from the XQueue and retrieves the property map in
 JSON from its body. It copies the source file defined in FileName to the
 remote file in LocalStore via sftp.
<br/><br/>
 It will always try to retrieve the URL from the field specified by
 FileName property.  If the message does not contain the URL, the method
 will use the default URL defined by URI property.  The LocalStore
 specifies the target filename and its property map is required to be
 stored in message body.
<br/><br/>
 The copy operation also supports the requests.  If the XAMode has
 enabled the XA_CLIENT bit, it will treat the message as a request from
 the uplink.  In this case, the incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is supposed to
 check the value of the property once it gets the message back.  If
 the return code is 0, the operation is successful.  Otherwise, the
 request will be dropped due to failures.  On the other hand, if the
 XA_CLIENT bit has been disabled by XAMode, the incoming message will
 not be modified.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.
<br/><br/>
 If the XQueue has enabled the EXTERNAL_XA bit, it will also acknowledge
 the messages.  This method is MT-Safe.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd>
</dl>
</li>
</ul>
<a name="getOperation--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/RMQMessenger.html" title="class in org.qbroker.jms"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../org/qbroker/jms/SNMPMessenger.html" title="class in org.qbroker.jms"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/SFTPMessenger.html" target="_top">Frames</a></li>
<li><a href="SFTPMessenger.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.org.qbroker.net.SFTPConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
