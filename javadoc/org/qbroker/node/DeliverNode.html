<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sun Jul 14 16:44:28 EDT 2019 -->
<title>DeliverNode</title>
<meta name="date" content="2019-07-14">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="DeliverNode";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/node/CollectNode.html" title="class in org.qbroker.node"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/node/DispatchNode.html" title="class in org.qbroker.node"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/node/DeliverNode.html" target="_top">Frames</a></li>
<li><a href="DeliverNode.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.node.Node">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.node</div>
<h2 title="Class DeliverNode" class="title">Class DeliverNode</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">org.qbroker.node.Node</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.node.DeliverNode</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">DeliverNode</span>
extends <a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></pre>
<div class="block">DeliverNode listens to an input XQ for JMS messages with an arbitray URI
 as their destinations.  For each incoming message, DeliverNode looks up
 its URI in the local cache for any XQueue as the transmit queue established
 for the destination. If there is an XQueue in the cache for the destination,
 DeliverNode just puts the incoming message to the XQueue as the delivery.
 Otherwise, DeliverNode will generate a request with the URI and a newly
 created XQueue for the destination. The request will be sent to the outlink
 connected to a PersisterPool for a new persister thread. Once the persister
 is instantiated, DeliverNode will collect the response from the
 PersisterPool.  The response is supposed to contain the persister thread
 for delivering the messages to the specific destination.  DeliverNode
 caches the thread and the id of the XQueue using the URI as the key.
 Therefore, DeliverNode is able to deliver JMS messages to arbitrary
 destinations based to their URIs and the predefined rulesets on-demand.
 <br/><br/>
 It has two types of outlinks, position-fixed and non-fixed.
 There are three position-fixed outlinks: pool for all requests to the
 PersisterPool, failure for the messages failed in the delivery process,
 nohit for those messages not covered by any rulesets.  The non-fixed
 outlinks are transmit queues for the on-demand destinations.
<br/><br/>
 DeliverNode also contains a number of predefined rulesets.  These
 rulesets categorize messages into non-overlapping groups.  Therefore,
 each rule defines a unique message group.  The ruleset also specifies
 the way to construct URI and properties for the new persisters.  For those
 messages falling off all defined rulesets, DeliverNode always creates
 an extra ruleset, nohit, to handle them.  Therefore all the nohit messages
 will be routed to nohit outlink.  The downstream node at nohit is supposed
 to handle all nohit messages.
<br/><br/>
 URI is used to identify destinations.  In order to construct the URI for an
 arbitrary destination, each ruleset contains two sets of format operations.
 The first one is the array of templates with the name of URITemplate.
 The other is the array of substitutions with the name of URISubstitution.
 URITemplate appends the previous non-empty text to URI and sets the next
 initial text for its corresponding URISubstitutions to modify.
 The associations between the URITemplates and URISubstitutions are based on
 their positions.  Either URITemplate or URISubstitution can be null for
 no action and a place holder.  Therefore, you can insert multiple null
 URITemplates so that the associated URISubstitutions will be able to modify
 the same text in turns.  If any of the operations fails, the message will
 be routed to failure outlink.  Besides, a ruleset may contain a hash of
 DefaultProperty as static or dynamic properties for the new persisters.
 If the URI string is not in the cache, DeliverNode will try to resolve all
 the dynamic variables in the hash of DefaultProperty from the incoming
 message first. Then it adds the DefaultProperty to the new request for the
 new persister. So the extra properties are able to passed over to the
 persister pool.
<br/><br/>
 For each new destination, DeliverNode creates an Object message as the
 request containing the URI and the XQueue, as well as the other
 properties provided they are defined.  The request is sent to the
 PersisterPool via the pool outlink.  Then DeliverNode frequently checks the
 response for each outstanding requests.  The response is supposed to have
 the status and the persister thread for the new destination.  DeliverNode
 will use the thread to monitor its status.  If the response does not have
 the thread, DeliverNode will route the messages to the failure outlink and
 remove the XQueue and the URI from the cache. The samething will happen if
 the request for a new persister times out.  MaxRetry is used to control
 when to timeout the request to the pool.  It also controls the timeout on
 a dead persister thread.
<br/><br/>
 DeliverNode also maintains an active set of XQueues as the transmit queues
 for all destinations.  Behind each XQueue, there is at least one persister
 thread delivering the messages to the destinations.  The messages may be
 stuck in the XQueue until they are delivered, as long as the persister is
 not stopped.  However, if there is no message in the queue, DeliverNode
 will mark it idle.  All the transmit queues are monitored frequently in
 every heartbeat.  If one of them has been idle for over MaxIdleTime, its
 queue will be stopped. Its persister thread and the transmit queue will be
 removed from the cache.
<br/><br/>
 You are free to choose any names for the three fixed outlinks.  But
 DeliverNode always assumes the first outlink for pool, the second for
 failure and the third for nohit.  The name for nohit outlink is allowed to
 be same as that of failure outlink.  But neither nohit nor failure is
 allowed to share their names with the pool.  The rest of the outlinks are
 for the on-demand destinations.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.node.Node">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.node.<a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></h3>
<code><a href="../../../org/qbroker/node/Node.html#assetList">assetList</a>, <a href="../../../org/qbroker/node/Node.html#bufferSize">bufferSize</a>, <a href="../../../org/qbroker/node/Node.html#callbackMethod">callbackMethod</a>, <a href="../../../org/qbroker/node/Node.html#capacity">capacity</a>, <a href="../../../org/qbroker/node/Node.html#cbw">cbw</a>, <a href="../../../org/qbroker/node/Node.html#cells">cells</a>, <a href="../../../org/qbroker/node/Node.html#cfgList">cfgList</a>, <a href="../../../org/qbroker/node/Node.html#chkptExpiration">chkptExpiration</a>, <a href="../../../org/qbroker/node/Node.html#debug">debug</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_COLL">DEBUG_COLL</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_DIFF">DEBUG_DIFF</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_FBAK">DEBUG_FBAK</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_INIT">DEBUG_INIT</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_PASS">DEBUG_PASS</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_PROP">DEBUG_PROP</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_REPT">DEBUG_REPT</a>, <a href="../../../org/qbroker/node/Node.html#DEBUG_UPDT">DEBUG_UPDT</a>, <a href="../../../org/qbroker/node/Node.html#displayMask">displayMask</a>, <a href="../../../org/qbroker/node/Node.html#displayPropertyName">displayPropertyName</a>, <a href="../../../org/qbroker/node/Node.html#linkName">linkName</a>, <a href="../../../org/qbroker/node/Node.html#LOAD_HIGH">LOAD_HIGH</a>, <a href="../../../org/qbroker/node/Node.html#LOAD_LOW">LOAD_LOW</a>, <a href="../../../org/qbroker/node/Node.html#LOAD_MEDIUM">LOAD_MEDIUM</a>, <a href="../../../org/qbroker/node/Node.html#msgList">msgList</a>, <a href="../../../org/qbroker/node/Node.html#name">name</a>, <a href="../../../org/qbroker/node/Node.html#operation">operation</a>, <a href="../../../org/qbroker/node/Node.html#RESET_ALL">RESET_ALL</a>, <a href="../../../org/qbroker/node/Node.html#RESET_MAP">RESET_MAP</a>, <a href="../../../org/qbroker/node/Node.html#RESET_NONE">RESET_NONE</a>, <a href="../../../org/qbroker/node/Node.html#RESET_SOME">RESET_SOME</a>, <a href="../../../org/qbroker/node/Node.html#ruleList">ruleList</a>, <a href="../../../org/qbroker/node/Node.html#status">status</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_ACTION">TYPE_ACTION</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_AGGREGATE">TYPE_AGGREGATE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_BYPASS">TYPE_BYPASS</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_CACHE">TYPE_CACHE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_COLLECT">TYPE_COLLECT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_DELIVER">TYPE_DELIVER</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_FORMAT">TYPE_FORMAT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_JSONPATH">TYPE_JSONPATH</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_JSONT">TYPE_JSONT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_MAPREDUCE">TYPE_MAPREDUCE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_NONE">TYPE_NONE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_PARSER">TYPE_PARSER</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_PICKUP">TYPE_PICKUP</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_PIPE">TYPE_PIPE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_PUBLISH">TYPE_PUBLISH</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_ROUNDROBIN">TYPE_ROUNDROBIN</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SCREEN">TYPE_SCREEN</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SCRIPT">TYPE_SCRIPT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SERVICE">TYPE_SERVICE</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SORT">TYPE_SORT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SPLIT">TYPE_SPLIT</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_SPREAD">TYPE_SPREAD</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_WEIGHTED">TYPE_WEIGHTED</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_XPATH">TYPE_XPATH</a>, <a href="../../../org/qbroker/node/Node.html#TYPE_XSLT">TYPE_XSLT</a>, <a href="../../../org/qbroker/node/Node.html#waitTime">waitTime</a>, <a href="../../../org/qbroker/node/Node.html#xaMode">xaMode</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.node.MessageNode">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.qbroker.node.<a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></h3>
<code><a href="../../../org/qbroker/node/MessageNode.html#ASSET_THR">ASSET_THR</a>, <a href="../../../org/qbroker/node/MessageNode.html#ASSET_URI">ASSET_URI</a>, <a href="../../../org/qbroker/node/MessageNode.html#ASSET_XQ">ASSET_XQ</a>, <a href="../../../org/qbroker/node/MessageNode.html#META_MAP">META_MAP</a>, <a href="../../../org/qbroker/node/MessageNode.html#META_MSG">META_MSG</a>, <a href="../../../org/qbroker/node/MessageNode.html#META_OUT">META_OUT</a>, <a href="../../../org/qbroker/node/MessageNode.html#META_RULE">META_RULE</a>, <a href="../../../org/qbroker/node/MessageNode.html#META_XQ">META_XQ</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_BID">MSG_BID</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_CID">MSG_CID</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_OID">MSG_OID</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_RID">MSG_RID</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_TID">MSG_TID</a>, <a href="../../../org/qbroker/node/MessageNode.html#MSG_TIME">MSG_TIME</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_CLOSED">NODE_CLOSED</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_DISABLED">NODE_DISABLED</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_PAUSE">NODE_PAUSE</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_READY">NODE_READY</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_RETRYING">NODE_RETRYING</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_RUNNING">NODE_RUNNING</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_STANDBY">NODE_STANDBY</a>, <a href="../../../org/qbroker/node/MessageNode.html#NODE_STOPPED">NODE_STOPPED</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_CAPACITY">OUT_CAPACITY</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_COUNT">OUT_COUNT</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_DEQ">OUT_DEQ</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_EXTRA">OUT_EXTRA</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_LENGTH">OUT_LENGTH</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_MODE">OUT_MODE</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_NRULE">OUT_NRULE</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_OFFSET">OUT_OFFSET</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_ORULE">OUT_ORULE</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_QDEPTH">OUT_QDEPTH</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_QIPPS">OUT_QIPPS</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_QSTATUS">OUT_QSTATUS</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_QTIME">OUT_QTIME</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_SIZE">OUT_SIZE</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_STATUS">OUT_STATUS</a>, <a href="../../../org/qbroker/node/MessageNode.html#OUT_TIME">OUT_TIME</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_COUNT">RULE_COUNT</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_DMASK">RULE_DMASK</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_EXTRA">RULE_EXTRA</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_GID">RULE_GID</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_MODE">RULE_MODE</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_OID">RULE_OID</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_OPTION">RULE_OPTION</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_PEND">RULE_PEND</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_PID">RULE_PID</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_SIZE">RULE_SIZE</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_STATUS">RULE_STATUS</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_TIME">RULE_TIME</a>, <a href="../../../org/qbroker/node/MessageNode.html#RULE_TTL">RULE_TTL</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#DeliverNode(java.util.Map)">DeliverNode</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#callback(java.lang.String, java.lang.String)">callback</a></strong>(java.lang.String&nbsp;key,
        java.lang.String&nbsp;id)</code>
<div class="block">It marks the cell in cells with key and id.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#close()">close</a></strong>()</code>
<div class="block">It closes all resources and cleans up all list, cache, metadata, etc.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#feedback(org.qbroker.common.XQueue, long)">feedback</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
        long&nbsp;milliSec)</code>
<div class="block">It returns the number of done messages removed from the input XQueue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#getOutLinkBoundary()">getOutLinkBoundary</a></strong>()</code>
<div class="block">returns 0 to have the ack propagation skipped on the first outlink</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#initRuleset(long, java.util.Map, long[])">initRuleset</a></strong>(long&nbsp;tm,
           java.util.Map&nbsp;ph,
           long[]&nbsp;ruleInfo)</code>
<div class="block">It initializes a new ruleset with the ruleInfo and returns the rule upon
 success.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#internalXQSupported()">internalXQSupported</a></strong>()</code>
<div class="block">always returns true since it supports dynamic XQs</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#passthru(long, javax.jms.Message, org.qbroker.common.XQueue, int, int, int, int)">passthru</a></strong>(long&nbsp;currentTime,
        javax.jms.Message&nbsp;msg,
        <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
        int&nbsp;rid,
        int&nbsp;oid,
        int&nbsp;cid,
        int&nbsp;tid)</code>
<div class="block">It passes the message from the input XQueue over to an output XQueue and
 returns 1 upon success or 0 otherwise.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#propagate(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">propagate</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
         <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>[]&nbsp;out)</code>
<div class="block">picks up a message from input queue and evaluates its content to
 decide which output queue to propagate</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#resetMetaData(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">resetMetaData</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
             <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>[]&nbsp;out)</code>
<div class="block">cleans up MetaData for all XQs and messages</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#takebackEnabled()">takebackEnabled</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/node/DeliverNode.html#updateParameters(java.util.Map)">updateParameters</a></strong>(java.util.Map&nbsp;props)</code>
<div class="block">It updates the parameters of the node with the given property map.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.qbroker.node.Node">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.node.<a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></h3>
<code><a href="../../../org/qbroker/node/Node.html#addRule(java.util.Map)">addRule</a>, <a href="../../../org/qbroker/node/Node.html#checkpoint()">checkpoint</a>, <a href="../../../org/qbroker/node/Node.html#collectAll(long, org.qbroker.common.XQueue, org.qbroker.common.XQueue, int, long[])">collectAll</a>, <a href="../../../org/qbroker/node/Node.html#containsRule(java.lang.String)">containsRule</a>, <a href="../../../org/qbroker/node/Node.html#containsXQ(java.lang.String)">containsXQ</a>, <a href="../../../org/qbroker/node/Node.html#forcethru(long, javax.jms.Message, org.qbroker.common.XQueue, int, int, int)">forcethru</a>, <a href="../../../org/qbroker/node/Node.html#getCapacity()">getCapacity</a>, <a href="../../../org/qbroker/node/Node.html#getCapacity(int)">getCapacity</a>, <a href="../../../org/qbroker/node/Node.html#getDebugMode()">getDebugMode</a>, <a href="../../../org/qbroker/node/Node.html#getDisplayMask()">getDisplayMask</a>, <a href="../../../org/qbroker/node/Node.html#getDisplayProperties()">getDisplayProperties</a>, <a href="../../../org/qbroker/node/Node.html#getLinkName()">getLinkName</a>, <a href="../../../org/qbroker/node/Node.html#getLinkName(int)">getLinkName</a>, <a href="../../../org/qbroker/node/Node.html#getMetaData(int, int, long[])">getMetaData</a>, <a href="../../../org/qbroker/node/Node.html#getName()">getName</a>, <a href="../../../org/qbroker/node/Node.html#getNumberOfOutLinks()">getNumberOfOutLinks</a>, <a href="../../../org/qbroker/node/Node.html#getNumberOfRules()">getNumberOfRules</a>, <a href="../../../org/qbroker/node/Node.html#getOperation()">getOperation</a>, <a href="../../../org/qbroker/node/Node.html#getRuleName(int)">getRuleName</a>, <a href="../../../org/qbroker/node/Node.html#getStatus()">getStatus</a>, <a href="../../../org/qbroker/node/Node.html#getXAMode()">getXAMode</a>, <a href="../../../org/qbroker/node/Node.html#getXAMode(int)">getXAMode</a>, <a href="../../../org/qbroker/node/Node.html#list(java.lang.String, int)">list</a>, <a href="../../../org/qbroker/node/Node.html#listPendings(org.qbroker.common.XQueue, int)">listPendings</a>, <a href="../../../org/qbroker/node/Node.html#refreshRule(java.lang.String, org.qbroker.common.XQueue)">refreshRule</a>, <a href="../../../org/qbroker/node/Node.html#removeRule(java.lang.String, org.qbroker.common.XQueue)">removeRule</a>, <a href="../../../org/qbroker/node/Node.html#renameRule(java.lang.String, java.lang.String)">renameRule</a>, <a href="../../../org/qbroker/node/Node.html#replaceRule(java.lang.String, java.util.Map, org.qbroker.common.XQueue)">replaceRule</a>, <a href="../../../org/qbroker/node/Node.html#restore(java.util.Map)">restore</a>, <a href="../../../org/qbroker/node/Node.html#rotateRule(java.lang.String)">rotateRule</a>, <a href="../../../org/qbroker/node/Node.html#setDebugMode(int)">setDebugMode</a>, <a href="../../../org/qbroker/node/Node.html#setDisplayMask(int)">setDisplayMask</a>, <a href="../../../org/qbroker/node/Node.html#setDisplayProperties(java.lang.String[])">setDisplayProperties</a>, <a href="../../../org/qbroker/node/Node.html#setStatus(int)">setStatus</a>, <a href="../../../org/qbroker/node/Node.html#show(java.lang.String, int, int)">show</a>, <a href="../../../org/qbroker/node/Node.html#takeback(java.lang.String, int)">takeback</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="DeliverNode(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DeliverNode</h4>
<pre>public&nbsp;DeliverNode(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="updateParameters(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateParameters</h4>
<pre>public&nbsp;int&nbsp;updateParameters(java.util.Map&nbsp;props)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../org/qbroker/node/Node.html#updateParameters(java.util.Map)">Node</a></code></strong></div>
<div class="block">It updates the parameters of the node with the given property map.
 Upon success, it returns the number of parameters modified.
 It is not MT-Safe.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#updateParameters(java.util.Map)">updateParameters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#updateParameters(java.util.Map)">updateParameters</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="initRuleset(long, java.util.Map, long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initRuleset</h4>
<pre>protected&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;initRuleset(long&nbsp;tm,
                                                           java.util.Map&nbsp;ph,
                                                           long[]&nbsp;ruleInfo)</pre>
<div class="block">It initializes a new ruleset with the ruleInfo and returns the rule upon
 success.  Otherwise, it throws an exception or returns null.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#initRuleset(long, java.util.Map, long[])">initRuleset</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="propagate(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>propagate</h4>
<pre>public&nbsp;void&nbsp;propagate(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
             <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>[]&nbsp;out)
               throws javax.jms.JMSException</pre>
<div class="block">picks up a message from input queue and evaluates its content to
 decide which output queue to propagate</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#propagate(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">propagate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#propagate(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">propagate</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="callback(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>callback</h4>
<pre>public&nbsp;void&nbsp;callback(java.lang.String&nbsp;key,
            java.lang.String&nbsp;id)</pre>
<div class="block">It marks the cell in cells with key and id.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#callback(java.lang.String, java.lang.String)">callback</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="passthru(long, javax.jms.Message, org.qbroker.common.XQueue, int, int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>passthru</h4>
<pre>protected&nbsp;int&nbsp;passthru(long&nbsp;currentTime,
           javax.jms.Message&nbsp;msg,
           <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
           int&nbsp;rid,
           int&nbsp;oid,
           int&nbsp;cid,
           int&nbsp;tid)</pre>
<div class="block">It passes the message from the input XQueue over to an output XQueue and
 returns 1 upon success or 0 otherwise.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#passthru(long, javax.jms.Message, org.qbroker.common.XQueue, int, int, int, int)">passthru</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="feedback(org.qbroker.common.XQueue, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>feedback</h4>
<pre>protected&nbsp;int&nbsp;feedback(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
           long&nbsp;milliSec)</pre>
<div class="block">It returns the number of done messages removed from the input XQueue.
 If milliSec < 0, there is no wait and it tries to collect all cells.
 Otherwise, it just tries to collect the first collectible cell.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#feedback(org.qbroker.common.XQueue, long)">feedback</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="resetMetaData(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetMetaData</h4>
<pre>public&nbsp;void&nbsp;resetMetaData(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;in,
                 <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>[]&nbsp;out)</pre>
<div class="block">cleans up MetaData for all XQs and messages</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#resetMetaData(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">resetMetaData</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#resetMetaData(org.qbroker.common.XQueue, org.qbroker.common.XQueue[])">resetMetaData</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="internalXQSupported()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>internalXQSupported</h4>
<pre>public&nbsp;boolean&nbsp;internalXQSupported()</pre>
<div class="block">always returns true since it supports dynamic XQs</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#internalXQSupported()">internalXQSupported</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#internalXQSupported()">internalXQSupported</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="takebackEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takebackEnabled</h4>
<pre>protected&nbsp;boolean&nbsp;takebackEnabled()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#takebackEnabled()">takebackEnabled</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="getOutLinkBoundary()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutLinkBoundary</h4>
<pre>public&nbsp;int&nbsp;getOutLinkBoundary()</pre>
<div class="block">returns 0 to have the ack propagation skipped on the first outlink</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#getOutLinkBoundary()">getOutLinkBoundary</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#getOutLinkBoundary()">getOutLinkBoundary</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../org/qbroker/node/Node.html#close()">Node</a></code></strong></div>
<div class="block">It closes all resources and cleans up all list, cache, metadata, etc.
 Once it is closed, it can not be used any more.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/MessageNode.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/node/MessageNode.html" title="interface in org.qbroker.node">MessageNode</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/node/Node.html#finalize()">finalize</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/node/Node.html" title="class in org.qbroker.node">Node</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/node/CollectNode.html" title="class in org.qbroker.node"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/node/DispatchNode.html" title="class in org.qbroker.node"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/node/DeliverNode.html" target="_top">Frames</a></li>
<li><a href="DeliverNode.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.node.Node">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
