<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sun Jun 11 07:39:11 EDT 2017 -->
<title>ServerPersister</title>
<meta name="date" content="2017-06-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ServerPersister";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/persister/RMQPersister.html" title="class in org.qbroker.persister"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/persister/StreamPersister.html" title="class in org.qbroker.persister"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/persister/ServerPersister.html" target="_top">Frames</a></li>
<li><a href="ServerPersister.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.persister.Persister">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.persister</div>
<h2 title="Class ServerPersister" class="title">Class ServerPersister</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">org.qbroker.persister.Persister</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.persister.ServerPersister</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ServerPersister</span>
extends <a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></pre>
<div class="block">ServerPersister listens to a ServerSocket and accepts the socket
 connections from it.  Once there is a new connection, it will check
 out a thread to handle the message IO on the socket.  The thread keeps
 getting JMS messages from the input XQueue and writes the byte stream
 to the socket.  Currently, it supports two operations, provide and publish.
 In case of the provide operation, ServerPersister allows multiple client
 threads to pick up messages from the same XQueue.  ServerPersister supports
 flow control and allows object control from its owner.  It is fault tolerant
 with retry and idle options.  In case of the publish operation, however,
 ServerPersister allows multiple subscribers to pick up messages published
 from the same XQueue and each client gets its own copies.  In this case,
 there is no flow control and buffer overrun may occur.  Therefore,
 ServerPersister is a JMS message outlet, or a JMS message provider.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.persister.Persister">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></h3>
<code><a href="../../../org/qbroker/persister/Persister.html#capacity">capacity</a>, <a href="../../../org/qbroker/persister/Persister.html#displayMask">displayMask</a>, <a href="../../../org/qbroker/persister/Persister.html#linkName">linkName</a>, <a href="../../../org/qbroker/persister/Persister.html#maxRetry">maxRetry</a>, <a href="../../../org/qbroker/persister/Persister.html#operation">operation</a>, <a href="../../../org/qbroker/persister/Persister.html#partition">partition</a>, <a href="../../../org/qbroker/persister/Persister.html#pauseTime">pauseTime</a>, <a href="../../../org/qbroker/persister/Persister.html#propertyName">propertyName</a>, <a href="../../../org/qbroker/persister/Persister.html#repeatPeriod">repeatPeriod</a>, <a href="../../../org/qbroker/persister/Persister.html#standbyTime">standbyTime</a>, <a href="../../../org/qbroker/persister/Persister.html#status">status</a>, <a href="../../../org/qbroker/persister/Persister.html#timeout">timeout</a>, <a href="../../../org/qbroker/persister/Persister.html#tolerance">tolerance</a>, <a href="../../../org/qbroker/persister/Persister.html#uri">uri</a>, <a href="../../../org/qbroker/persister/Persister.html#waitTime">waitTime</a>, <a href="../../../org/qbroker/persister/Persister.html#xaMode">xaMode</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.persister.MessagePersister">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></h3>
<code><a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_CLOSED">PSTR_CLOSED</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_DISABLED">PSTR_DISABLED</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_PAUSE">PSTR_PAUSE</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_READY">PSTR_READY</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_RETRYING">PSTR_RETRYING</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_RUNNING">PSTR_RUNNING</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_STANDBY">PSTR_STANDBY</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_STOPPED">PSTR_STOPPED</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#ServerPersister(java.util.Map)">ServerPersister</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#close()">close</a></strong>()</code>
<div class="block">closes all opened resources</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#doPublish(org.qbroker.common.XQueue)">doPublish</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It keeps publishing until its end of life</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#persist(org.qbroker.common.XQueue, int)">persist</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
       int&nbsp;baseTime)</code>
<div class="block">gets all the JMS messages from the XQueue and delivers them to
 their destinations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ServerPersister.html#provide(org.qbroker.common.XQueue, java.net.Socket, java.lang.String)">provide</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
       java.net.Socket&nbsp;sock,
       java.lang.String&nbsp;ip)</code>
<div class="block">It gets JMS Messages from an XQueue and writes the content of messages
 to the socket continuously.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.qbroker.persister.Persister">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></h3>
<code><a href="../../../org/qbroker/persister/Persister.html#getCapacity()">getCapacity</a>, <a href="../../../org/qbroker/persister/Persister.html#getLinkName()">getLinkName</a>, <a href="../../../org/qbroker/persister/Persister.html#getName()">getName</a>, <a href="../../../org/qbroker/persister/Persister.html#getOperation()">getOperation</a>, <a href="../../../org/qbroker/persister/Persister.html#getStatus()">getStatus</a>, <a href="../../../org/qbroker/persister/Persister.html#getXAMode()">getXAMode</a>, <a href="../../../org/qbroker/persister/Persister.html#isStopped(org.qbroker.common.XQueue)">isStopped</a>, <a href="../../../org/qbroker/persister/Persister.html#keepRunning(org.qbroker.common.XQueue)">keepRunning</a>, <a href="../../../org/qbroker/persister/Persister.html#resetStatus(int, int)">resetStatus</a>, <a href="../../../org/qbroker/persister/Persister.html#setStatus(int)">setStatus</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ServerPersister(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ServerPersister</h4>
<pre>public&nbsp;ServerPersister(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="persist(org.qbroker.common.XQueue, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persist</h4>
<pre>public&nbsp;void&nbsp;persist(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
           int&nbsp;baseTime)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html#persist(org.qbroker.common.XQueue, int)">MessagePersister</a></code></strong></div>
<div class="block">gets all the JMS messages from the XQueue and delivers them to
 their destinations.  In case of failure, it should keep retry with
 the sleepTime in milliseconds.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/MessagePersister.html#persist(org.qbroker.common.XQueue, int)">persist</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/Persister.html#persist(org.qbroker.common.XQueue, int)">persist</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></code></dd>
</dl>
</li>
</ul>
<a name="provide(org.qbroker.common.XQueue, java.net.Socket, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>provide</h4>
<pre>public&nbsp;void&nbsp;provide(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
           java.net.Socket&nbsp;sock,
           java.lang.String&nbsp;ip)</pre>
<div class="block">It gets JMS Messages from an XQueue and writes the content of messages
 to the socket continuously.  It acts like a source of a byte stream.
 This method is used to write the content on behalf of a subscriber.
 In case of publish operation, the xq is the one created for the
 subscriber. The publisher will copy messages into the xq. For provide
 operation, the xq is the original source. So the flow control on the
 xq will impact on this method. For example, if the flow tries to disable
 the persister, the provide method will return.</div>
</li>
</ul>
<a name="doPublish(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doPublish</h4>
<pre>public&nbsp;void&nbsp;doPublish(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</pre>
<div class="block">It keeps publishing until its end of life</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html#close()">MessagePersister</a></code></strong></div>
<div class="block">closes all opened resources</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/MessagePersister.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/Persister.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></code></dd>
</dl>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/persister/RMQPersister.html" title="class in org.qbroker.persister"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/persister/StreamPersister.html" title="class in org.qbroker.persister"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/persister/ServerPersister.html" target="_top">Frames</a></li>
<li><a href="ServerPersister.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.persister.Persister">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
