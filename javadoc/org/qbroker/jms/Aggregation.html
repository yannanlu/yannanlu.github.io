<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Tue Dec 25 11:47:37 EST 2018 -->
<title>Aggregation</title>
<meta name="date" content="2018-12-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="Aggregation";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/qbroker/jms/AWSMessenger.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/Aggregation.html" target="_top">Frames</a></li>
<li><a href="Aggregation.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.jms</div>
<h2 title="Class Aggregation" class="title">Class Aggregation</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.qbroker.jms.Aggregation</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Aggregation</span>
extends java.lang.Object</pre>
<div class="block">Aggregation contains a list of stateless operations for aggregations
 on the properties retrieved from either JMS messages or Events. The
 aggregation process will not touch the message body due to its different
 data types. For aggregation on the message body, Aggregation provides
 a bunch of assistant methods, such as merge(), and stores the aggregation
 map with various policies and operations. Together, they can be used to
 aggregate the message body externally.
<br/><br/>
 In case of average, AveragedOver is required.  Its referenced name should be
 defined before it. In case of standard deviation, VarianceOf is requires.
 Its referenced name should be defined before it. In case of max or min, the 
 name of the field does not have to exist in the incoming message.  But the
 referenced name by MaxOf or MinOf should be defined before it. If TimePattern
 is defined for max or min, Aggregation will parse the value to get the
 timestamp for comparisons.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_APPEND">AGGR_APPEND</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_AVG">AGGR_AVG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_COUNT">AGGR_COUNT</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_END">AGGR_END</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_FIRST">AGGR_FIRST</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_JOIN">AGGR_JOIN</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_LAST">AGGR_LAST</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_MAX">AGGR_MAX</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_MERGE">AGGR_MERGE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_MIN">AGGR_MIN</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_NONE">AGGR_NONE</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_STD">AGGR_STD</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_SUM">AGGR_SUM</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_UNION">AGGR_UNION</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#AGGR_XUNION">AGGR_XUNION</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#Aggregation(java.lang.String, java.util.List)">Aggregation</a></strong>(java.lang.String&nbsp;name,
           java.util.List&nbsp;list)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#aggregate(long, org.qbroker.event.Event, org.qbroker.jms.TextEvent)">aggregate</a></strong>(long&nbsp;currentTime,
         <a href="../../../org/qbroker/event/Event.html" title="class in org.qbroker.event">Event</a>&nbsp;event,
         <a href="../../../org/qbroker/jms/TextEvent.html" title="class in org.qbroker.jms">TextEvent</a>&nbsp;msg)</code>
<div class="block">It aggregates the incoming event with the aggregation message
 according to the aggregation options.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#aggregate(long, javax.jms.Message, javax.jms.Message)">aggregate</a></strong>(long&nbsp;currentTime,
         javax.jms.Message&nbsp;inMessage,
         javax.jms.Message&nbsp;msg)</code>
<div class="block">It aggregates the incoming message with the aggregation message
 according to the aggregation options.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../org/qbroker/common/Browser.html" title="interface in org.qbroker.common">Browser</a></code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#browser()">browser</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#clear()">clear</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#clearBodyMap()">clearBodyMap</a></strong>()</code>
<div class="block">clears the bodyMap</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#compare(int, javax.jms.Message, javax.jms.Message)">compare</a></strong>(int&nbsp;i,
       javax.jms.Message&nbsp;inMessage,
       javax.jms.Message&nbsp;msg)</code>
<div class="block">It compares the value of the i-th property between the incoming message
 and the cached message to determine whose message body will be cached.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#containsKey(java.lang.String)">containsKey</a></strong>(java.lang.String&nbsp;key)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#displayList(java.lang.String)">displayList</a></strong>(java.lang.String&nbsp;indent)</code>
<div class="block">returns a text with all aggregate actions</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getBodyDataType()">getBodyDataType</a></strong>()</code>
<div class="block">returns data type for body</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getBodyOperation()">getBodyOperation</a></strong>()</code>
<div class="block">returns aggregation id for body</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getBodyType()">getBodyType</a></strong>()</code>
<div class="block">returns result type for body</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.Object</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getFromBody(java.lang.String)">getFromBody</a></strong>(java.lang.String&nbsp;key)</code>
<div class="block">returns the object stored in the body map for the key</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getKey(int)">getKey</a></strong>(int&nbsp;id)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getName()">getName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#getSize()">getSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#hasBody()">hasBody</a></strong>()</code>
<div class="block">returns true if body aggregation map is NOT empty</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#hasKeyInBody(java.lang.String)">hasKeyInBody</a></strong>(java.lang.String&nbsp;key)</code>
<div class="block">returns true if body aggregation Map contains the key</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#initCache(org.w3c.dom.Document, java.util.Map)">initCache</a></strong>(org.w3c.dom.Document&nbsp;doc,
         java.util.Map&nbsp;map)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#initCache(java.util.Map)">initCache</a></strong>(java.util.Map&nbsp;map)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#initialize(long, org.qbroker.event.Event, org.qbroker.jms.TextEvent)">initialize</a></strong>(long&nbsp;currentTime,
          <a href="../../../org/qbroker/event/Event.html" title="class in org.qbroker.event">Event</a>&nbsp;event,
          <a href="../../../org/qbroker/jms/TextEvent.html" title="class in org.qbroker.jms">TextEvent</a>&nbsp;msg)</code>
<div class="block">It initializes the aggregation event and aggregates the fisrt incoming
 event according to the aggregation operations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#initialize(long, javax.jms.Message, javax.jms.Message)">initialize</a></strong>(long&nbsp;currentTime,
          javax.jms.Message&nbsp;inMessage,
          javax.jms.Message&nbsp;msg)</code>
<div class="block">It initializes the aggregation message and aggregates the fisrt incoming
 message according to the aggregation operations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#merge(java.io.Reader, org.w3c.dom.Document, javax.xml.parsers.DocumentBuilder)">merge</a></strong>(java.io.Reader&nbsp;sr,
     org.w3c.dom.Document&nbsp;doc,
     javax.xml.parsers.DocumentBuilder&nbsp;builder)</code>
<div class="block">merges the xml content from the given reader to the xml doc and
 returns number of objects merged or -1 for failure</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#merge(java.io.Reader, java.lang.String, java.util.Map)">merge</a></strong>(java.io.Reader&nbsp;sr,
     java.lang.String&nbsp;key,
     java.util.Map&nbsp;map)</code>
<div class="block">merges the json content from the given reader to the parsed json map
 and returns 1 for success, 0 for empty source and -1 for failure</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#rollback(long, javax.jms.Message, javax.jms.Message)">rollback</a></strong>(long&nbsp;currentTime,
        javax.jms.Message&nbsp;inMessage,
        javax.jms.Message&nbsp;msg)</code>
<div class="block">not implemented yet</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.util.Map</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#setBodyMap(java.util.Map)">setBodyMap</a></strong>(java.util.Map&nbsp;map)</code>
<div class="block">sets the body map and returns the old one</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#union(java.io.Reader, org.w3c.dom.Document, javax.xml.parsers.DocumentBuilder, java.util.Map)">union</a></strong>(java.io.Reader&nbsp;sr,
     org.w3c.dom.Document&nbsp;doc,
     javax.xml.parsers.DocumentBuilder&nbsp;builder,
     java.util.Map&nbsp;map)</code>
<div class="block">unions the xml content from the given reader to the parsed xml doc
 and returns 1 for success, 0 for empty source and -1 for failure</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/Aggregation.html#union(java.io.Reader, java.util.Map)">union</a></strong>(java.io.Reader&nbsp;sr,
     java.util.Map&nbsp;map)</code>
<div class="block">unions the json content from the given reader to the parsed json map
 and returns 1 for success, 0 for empty source and -1 for failure</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="AGGR_NONE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_NONE</h4>
<pre>public static final&nbsp;int AGGR_NONE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_NONE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_COUNT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_COUNT</h4>
<pre>public static final&nbsp;int AGGR_COUNT</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_COUNT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_SUM">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_SUM</h4>
<pre>public static final&nbsp;int AGGR_SUM</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_SUM">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_MIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_MIN</h4>
<pre>public static final&nbsp;int AGGR_MIN</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_MIN">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_MAX">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_MAX</h4>
<pre>public static final&nbsp;int AGGR_MAX</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_MAX">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_APPEND">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_APPEND</h4>
<pre>public static final&nbsp;int AGGR_APPEND</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_APPEND">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_FIRST">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_FIRST</h4>
<pre>public static final&nbsp;int AGGR_FIRST</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_FIRST">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_LAST">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_LAST</h4>
<pre>public static final&nbsp;int AGGR_LAST</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_LAST">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_AVG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_AVG</h4>
<pre>public static final&nbsp;int AGGR_AVG</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_AVG">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_STD">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_STD</h4>
<pre>public static final&nbsp;int AGGR_STD</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_STD">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_MERGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_MERGE</h4>
<pre>public static final&nbsp;int AGGR_MERGE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_MERGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_UNION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_UNION</h4>
<pre>public static final&nbsp;int AGGR_UNION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_UNION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_XUNION">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_XUNION</h4>
<pre>public static final&nbsp;int AGGR_XUNION</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_XUNION">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_JOIN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AGGR_JOIN</h4>
<pre>public static final&nbsp;int AGGR_JOIN</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_JOIN">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="AGGR_END">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AGGR_END</h4>
<pre>public static final&nbsp;int AGGR_END</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#org.qbroker.jms.Aggregation.AGGR_END">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Aggregation(java.lang.String, java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Aggregation</h4>
<pre>public&nbsp;Aggregation(java.lang.String&nbsp;name,
           java.util.List&nbsp;list)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="initialize(long, org.qbroker.event.Event, org.qbroker.jms.TextEvent)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;int&nbsp;initialize(long&nbsp;currentTime,
             <a href="../../../org/qbroker/event/Event.html" title="class in org.qbroker.event">Event</a>&nbsp;event,
             <a href="../../../org/qbroker/jms/TextEvent.html" title="class in org.qbroker.jms">TextEvent</a>&nbsp;msg)</pre>
<div class="block">It initializes the aggregation event and aggregates the fisrt incoming
 event according to the aggregation operations.  Upon success, it returns
 0.  Otherwise, it returns -1 to indicate errors.</div>
</li>
</ul>
<a name="aggregate(long, org.qbroker.event.Event, org.qbroker.jms.TextEvent)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aggregate</h4>
<pre>public&nbsp;int&nbsp;aggregate(long&nbsp;currentTime,
            <a href="../../../org/qbroker/event/Event.html" title="class in org.qbroker.event">Event</a>&nbsp;event,
            <a href="../../../org/qbroker/jms/TextEvent.html" title="class in org.qbroker.jms">TextEvent</a>&nbsp;msg)</pre>
<div class="block">It aggregates the incoming event with the aggregation message
 according to the aggregation options.  It extracts data from the
 incoming message and aggregates the values into the cached text
 message.  Upon success, it returns 0.  Otherwise, it returns -1
 to indicate errors.</div>
</li>
</ul>
<a name="rollback(long, javax.jms.Message, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rollback</h4>
<pre>public&nbsp;int&nbsp;rollback(long&nbsp;currentTime,
           javax.jms.Message&nbsp;inMessage,
           javax.jms.Message&nbsp;msg)</pre>
<div class="block">not implemented yet</div>
</li>
</ul>
<a name="initialize(long, javax.jms.Message, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initialize</h4>
<pre>public&nbsp;int&nbsp;initialize(long&nbsp;currentTime,
             javax.jms.Message&nbsp;inMessage,
             javax.jms.Message&nbsp;msg)
               throws javax.jms.JMSException</pre>
<div class="block">It initializes the aggregation message and aggregates the fisrt incoming
 message according to the aggregation operations.  Upon success, it
 returns 0.  Otherwise, it returns -1 to indicate errors.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="aggregate(long, javax.jms.Message, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>aggregate</h4>
<pre>public&nbsp;int&nbsp;aggregate(long&nbsp;currentTime,
            javax.jms.Message&nbsp;inMessage,
            javax.jms.Message&nbsp;msg)
              throws javax.jms.JMSException</pre>
<div class="block">It aggregates the incoming message with the aggregation message
 according to the aggregation options.  It extracts data from the
 incoming message and aggregates the values into the cached text
 message.  Upon success, it returns 0.  Otherwise, it returns -1
 to indicate errors.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="compare(int, javax.jms.Message, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compare</h4>
<pre>public&nbsp;int&nbsp;compare(int&nbsp;i,
          javax.jms.Message&nbsp;inMessage,
          javax.jms.Message&nbsp;msg)</pre>
<div class="block">It compares the value of the i-th property between the incoming message
 and the cached message to determine whose message body will be cached.
 It returns 1 for update, 0 for same value, -1 for no update, -2 for
 failure.</div>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
</li>
</ul>
<a name="getSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSize</h4>
<pre>public&nbsp;int&nbsp;getSize()</pre>
</li>
</ul>
<a name="containsKey(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>containsKey</h4>
<pre>public&nbsp;boolean&nbsp;containsKey(java.lang.String&nbsp;key)</pre>
</li>
</ul>
<a name="getKey(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getKey</h4>
<pre>public&nbsp;java.lang.String&nbsp;getKey(int&nbsp;id)</pre>
</li>
</ul>
<a name="browser()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>browser</h4>
<pre>public&nbsp;<a href="../../../org/qbroker/common/Browser.html" title="interface in org.qbroker.common">Browser</a>&nbsp;browser()</pre>
</li>
</ul>
<a name="hasBody()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasBody</h4>
<pre>public&nbsp;boolean&nbsp;hasBody()</pre>
<div class="block">returns true if body aggregation map is NOT empty</div>
</li>
</ul>
<a name="hasKeyInBody(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasKeyInBody</h4>
<pre>public&nbsp;boolean&nbsp;hasKeyInBody(java.lang.String&nbsp;key)</pre>
<div class="block">returns true if body aggregation Map contains the key</div>
</li>
</ul>
<a name="getFromBody(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFromBody</h4>
<pre>public&nbsp;java.lang.Object&nbsp;getFromBody(java.lang.String&nbsp;key)</pre>
<div class="block">returns the object stored in the body map for the key</div>
</li>
</ul>
<a name="getBodyOperation()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBodyOperation</h4>
<pre>public&nbsp;int&nbsp;getBodyOperation()</pre>
<div class="block">returns aggregation id for body</div>
</li>
</ul>
<a name="getBodyType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBodyType</h4>
<pre>public&nbsp;int&nbsp;getBodyType()</pre>
<div class="block">returns result type for body</div>
</li>
</ul>
<a name="getBodyDataType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBodyDataType</h4>
<pre>public&nbsp;int&nbsp;getBodyDataType()</pre>
<div class="block">returns data type for body</div>
</li>
</ul>
<a name="setBodyMap(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBodyMap</h4>
<pre>public&nbsp;java.util.Map&nbsp;setBodyMap(java.util.Map&nbsp;map)</pre>
<div class="block">sets the body map and returns the old one</div>
</li>
</ul>
<a name="clearBodyMap()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clearBodyMap</h4>
<pre>public&nbsp;void&nbsp;clearBodyMap()</pre>
<div class="block">clears the bodyMap</div>
</li>
</ul>
<a name="merge(java.io.Reader, org.w3c.dom.Document, javax.xml.parsers.DocumentBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;int&nbsp;merge(java.io.Reader&nbsp;sr,
        org.w3c.dom.Document&nbsp;doc,
        javax.xml.parsers.DocumentBuilder&nbsp;builder)
          throws java.io.IOException,
                 org.xml.sax.SAXException,
                 javax.xml.xpath.XPathExpressionException</pre>
<div class="block">merges the xml content from the given reader to the xml doc and
 returns number of objects merged or -1 for failure</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.xpath.XPathExpressionException</code></dd></dl>
</li>
</ul>
<a name="merge(java.io.Reader, java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>merge</h4>
<pre>public&nbsp;int&nbsp;merge(java.io.Reader&nbsp;sr,
        java.lang.String&nbsp;key,
        java.util.Map&nbsp;map)
          throws java.io.IOException</pre>
<div class="block">merges the json content from the given reader to the parsed json map
 and returns 1 for success, 0 for empty source and -1 for failure</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="union(java.io.Reader, org.w3c.dom.Document, javax.xml.parsers.DocumentBuilder, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>union</h4>
<pre>public&nbsp;int&nbsp;union(java.io.Reader&nbsp;sr,
        org.w3c.dom.Document&nbsp;doc,
        javax.xml.parsers.DocumentBuilder&nbsp;builder,
        java.util.Map&nbsp;map)
          throws java.io.IOException,
                 org.xml.sax.SAXException,
                 javax.xml.xpath.XPathExpressionException</pre>
<div class="block">unions the xml content from the given reader to the parsed xml doc
 and returns 1 for success, 0 for empty source and -1 for failure</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>org.xml.sax.SAXException</code></dd>
<dd><code>javax.xml.xpath.XPathExpressionException</code></dd></dl>
</li>
</ul>
<a name="union(java.io.Reader, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>union</h4>
<pre>public&nbsp;int&nbsp;union(java.io.Reader&nbsp;sr,
        java.util.Map&nbsp;map)
          throws java.io.IOException</pre>
<div class="block">unions the json content from the given reader to the parsed json map
 and returns 1 for success, 0 for empty source and -1 for failure</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="initCache(org.w3c.dom.Document, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initCache</h4>
<pre>public&nbsp;int&nbsp;initCache(org.w3c.dom.Document&nbsp;doc,
            java.util.Map&nbsp;map)
              throws java.io.IOException,
                     javax.xml.xpath.XPathExpressionException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.xml.xpath.XPathExpressionException</code></dd></dl>
</li>
</ul>
<a name="initCache(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initCache</h4>
<pre>public&nbsp;int&nbsp;initCache(java.util.Map&nbsp;map)
              throws java.io.IOException</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="displayList(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>displayList</h4>
<pre>public&nbsp;java.lang.String&nbsp;displayList(java.lang.String&nbsp;indent)</pre>
<div class="block">returns a text with all aggregate actions</div>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../org/qbroker/jms/AWSMessenger.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/Aggregation.html" target="_top">Frames</a></li>
<li><a href="Aggregation.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
