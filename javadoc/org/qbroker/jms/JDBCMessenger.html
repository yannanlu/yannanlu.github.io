<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Mar 31 08:47:42 EDT 2018 -->
<title>JDBCMessenger</title>
<meta name="date" content="2018-03-31">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JDBCMessenger";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/HTTPMessenger.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/JMSEvent.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/JDBCMessenger.html" target="_top">Frames</a></li>
<li><a href="JDBCMessenger.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.net.DBConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.jms</div>
<h2 title="Class JDBCMessenger" class="title">Class JDBCMessenger</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">org.qbroker.net.DBConnector</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.jms.JDBCMessenger</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/qbroker/common/Connector.html" title="interface in org.qbroker.common">Connector</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">JDBCMessenger</span>
extends <a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">DBConnector</a></pre>
<div class="block">JDBCMessenger connects to a database specified by URI and initializes the
 operation of query and update for SQL statement with JMS Messages.
<br/><br/>
 There are four methods, select(), query(), update() and list() for the SQL
 statements.  The method of select() executes a fixed query statement. In
 case of repeated select operation, DependencyGroup has to be defined. It
 will be used to determine how often to rerun the select query. If KeyColumn
 is defined, the SQL statement has to contain a parameter as the start point
 to filter out old rows.  The rest of methods extract the SQL statements from
 the incoming messages.  It supports setXXX() with %%TYPE:property%% as
 the placeholder, where TYPE is one of the followings: INT, LONG, FLOAT,
 DOUBLE, STRING, DATE, TIME and TIMESTAMP.  If there is no TYPE defined,
 the default type of STRING will be assumed.  The method of query() is used
 for synchronous requests, whereas update() is for asynchronous persisting
 request.  Therefore, if you what to update Database automatically, please
 use update().  It will keep retry upon database failures until the message
 expires. The method of list() has no SQL statement. It is to list all tables
 in a database with dynamic filter support or all columns in a specific table.
<br/><br/>
 In case of BLOB or LONGVARBINARY data is queried with a BytesMessage, the
 method of query will only return the first row with the last BLOB or
 LONGVARBINARY data stored in the message body.  The rest of the data will
 formatted into the SQLField if there is any.
<br/><br/>
 In case of query with INSERT action, the method of query() will also
 check the extra SQL statement stored in the ExtraSQLField of the message.
 If the statement is defined, it will be executed only if the first statement
 is successful.  The extra SQL statement can be used to get Auto-Increment
 id or something else.  The result of the extra statement will be put into
 the ExtraSQLField as a string for return.  In case of error, "ERROR: "
 will be prefixed to the result string.
<br/><br/>
 In case of charSet and encoding, you can overwrite the default encoding by
 starting JVM with "-Dfile.encoding=ISO8859_1 your_class".
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.net.DBConnector">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">DBConnector</a></h3>
<code><a href="../../../org/qbroker/net/DBConnector.html#resultType">resultType</a>, <a href="../../../org/qbroker/net/DBConnector.html#sqlExecTimeout">sqlExecTimeout</a>, <a href="../../../org/qbroker/net/DBConnector.html#uri">uri</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#JDBCMessenger(java.util.Map)">JDBCMessenger</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#acknowledge(long[])">acknowledge</a></strong>(long[]&nbsp;state)</code>
<div class="block">checks in the prepared statement and removes the asset for the result set</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#close()">close</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#destroyObject(java.lang.Object)">destroyObject</a></strong>(java.lang.Object&nbsp;obj)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#getOperation()">getOperation</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#getResult(int, java.sql.ResultSet, java.lang.String, byte[], javax.jms.BytesMessage)">getResult</a></strong>(int&nbsp;type,
         java.sql.ResultSet&nbsp;rset,
         java.lang.String&nbsp;key,
         byte[]&nbsp;buffer,
         javax.jms.BytesMessage&nbsp;msg)</code>
<div class="block">It retrieves BLOB data or LONGVARBINARY data as well as other data from
 the resultset and puts them into the BytesMessage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#list(org.qbroker.common.XQueue)">list</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It listens to an XQueue for incoming JMS messages and extracts a pattern
 for table names or a specific table name, and content filters from each
 message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#loadReference()">loadReference</a></strong>()</code>
<div class="block">loads the state parameters from the reference file</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#query(org.qbroker.common.XQueue)">query</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It listens to an XQueue for incoming JMS messages and extracts the
 SQL statement and data from each message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#reconnect()">reconnect</a></strong>()</code>
<div class="block">reconnects to the DB and returns null on success or err msg otherwise</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#saveReference()">saveReference</a></strong>()</code>
<div class="block">flushes the current reference info to a given file for tracking the
 browser state if the ReferenceFile is defined.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#select(org.qbroker.common.XQueue)">select</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It executes the predfined SQL statement and puts the result to the body
 of a new message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#setParameters(java.lang.String, java.sql.PreparedStatement, java.lang.String, javax.jms.Message)">setParameters</a></strong>(java.lang.String&nbsp;sqlStr,
             java.sql.PreparedStatement&nbsp;ps,
             java.lang.String&nbsp;msgStr,
             javax.jms.Message&nbsp;msg)</code>
<div class="block">It sets parameters with the data from the message</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/JDBCMessenger.html#update(org.qbroker.common.XQueue)">update</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It listens to the XQueue for incoming JMS messages and extracts the
 SQL statement and data from each message.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.qbroker.net.DBConnector">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">DBConnector</a></h3>
<code><a href="../../../org/qbroker/net/DBConnector.html#commit()">commit</a>, <a href="../../../org/qbroker/net/DBConnector.html#copyStream(int, java.io.InputStream, java.lang.String)">copyStream</a>, <a href="../../../org/qbroker/net/DBConnector.html#copyStream(java.lang.String, java.io.OutputStream)">copyStream</a>, <a href="../../../org/qbroker/net/DBConnector.html#executeQuery(java.lang.String)">executeQuery</a>, <a href="../../../org/qbroker/net/DBConnector.html#getURI()">getURI</a>, <a href="../../../org/qbroker/net/DBConnector.html#isConnected()">isConnected</a>, <a href="../../../org/qbroker/net/DBConnector.html#list(java.lang.String, int[])">list</a>, <a href="../../../org/qbroker/net/DBConnector.html#list(java.lang.String, java.lang.String[])">list</a>, <a href="../../../org/qbroker/net/DBConnector.html#list(java.lang.String, java.lang.String[], int[])">list</a>, <a href="../../../org/qbroker/net/DBConnector.html#main(java.lang.String[])">main</a>, <a href="../../../org/qbroker/net/DBConnector.html#prepareStatement(java.lang.String)">prepareStatement</a>, <a href="../../../org/qbroker/net/DBConnector.html#rollback()">rollback</a>, <a href="../../../org/qbroker/net/DBConnector.html#select(java.lang.String, int[])">select</a>, <a href="../../../org/qbroker/net/DBConnector.html#setAutoCommit(boolean)">setAutoCommit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="JDBCMessenger(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JDBCMessenger</h4>
<pre>public&nbsp;JDBCMessenger(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="select(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>select</h4>
<pre>public&nbsp;void&nbsp;select(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
            throws java.sql.SQLException,
                   javax.jms.JMSException</pre>
<div class="block">It executes the predfined SQL statement and puts the result to the body
 of a new message.  The new message will be added to the XQueue as the
 output.  The result may be a delimited text stored in a TextMessage,
 a delimited bytes string stored in a BytesMessage, a List with
 String[] as the member stored in an ObjectMessage, or a ResultSet
 stored in an ObjectMessage together with the ack method enabled.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="loadReference()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadReference</h4>
<pre>public&nbsp;void&nbsp;loadReference()
                   throws java.io.IOException</pre>
<div class="block">loads the state parameters from the reference file</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="saveReference()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveReference</h4>
<pre>protected&nbsp;void&nbsp;saveReference()
                      throws java.io.IOException</pre>
<div class="block">flushes the current reference info to a given file for tracking the
 browser state if the ReferenceFile is defined.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="query(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query</h4>
<pre>public&nbsp;void&nbsp;query(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
           throws java.sql.SQLException,
                  <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></pre>
<div class="block">It listens to an XQueue for incoming JMS messages and extracts the
 SQL statement and data from each message.  After compiling and
 setting data on the statement, it executes the SQL statement to query
 the database.  Based on the result type, the query result can be
 formatted into the customized content.  Or the ResultSet of the query
 can be put into the message before it is removed from the XQueue.  The
 requester will be able to get the result content or ResultSet out of
 the message.  In case of non-select SQL statement, it will execute the
 statement and store the return code into the RCField.
<br/><br/>
 Since the query operation relies on the request, this method will
 intercept the request and processes it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the query is successful.  Otherwise, the
 message body will not contain the content out of query operation.
<br/><br/>
 If the SQL statement is an INSERT action and its execution is successful,
 this method will also check the extra SQL statement stored in the
 ExtraSQLField of the message.  If the statement is defined, it will be
 executed immediately.  Its result will be put into the same field as the
 return.  The requester is supposed to check the content in ExtraSQLField.
 This extra SQL can be used to get Auto-Increment id or something else.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd></dl>
</li>
</ul>
<a name="update(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;void&nbsp;update(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
            throws java.sql.SQLException,
                   <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                   javax.jms.JMSException</pre>
<div class="block">It listens to the XQueue for incoming JMS messages and extracts the
 SQL statement and data from each message.  After the compiling and
 setting data on the statement, it executes the SQL statement for
 the database operation of update, insert or delete.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 It is up to the caller to handle this exception.
<br/><br/>
 The original message will not be modified.  If the XQueue has enabled
 the EXTERNAL_XA bit, it will also acknowledge the messages.
 It is NOT MT-Safe due to the cached SQL statements.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="list(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;void&nbsp;list(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
          throws java.sql.SQLException,
                 <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></pre>
<div class="block">It listens to an XQueue for incoming JMS messages and extracts a pattern
 for table names or a specific table name, and content filters from each
 message.  In case of a pattern, it gets a list of tables in the database
 and queries the total count of records in each table hit by the filters.
 If the request has no wildcards, it will be treated as a specific table
 name. The method will get info for each of the columns. Based on the
 result type, the query result for tables will be formatted into the
 customized content with 4 columns, TABLE_NAME, TABLE_TYPE, COUNT, and
 REMARK. The result will be put into the message before it is removed
 from the XQueue.  The requester will be able to get the result content
 out of the message.
<br/><br/>
 Since the list operation relies on the request, this method will
 intercept the request and processes it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the query is successful.  Otherwise, the
 message body will not contain the content out of query operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd></dl>
</li>
</ul>
<a name="setParameters(java.lang.String, java.sql.PreparedStatement, java.lang.String, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setParameters</h4>
<pre>protected&nbsp;int&nbsp;setParameters(java.lang.String&nbsp;sqlStr,
                java.sql.PreparedStatement&nbsp;ps,
                java.lang.String&nbsp;msgStr,
                javax.jms.Message&nbsp;msg)
                     throws java.sql.SQLException,
                            javax.jms.JMSException</pre>
<div class="block">It sets parameters with the data from the message</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="getResult(int, java.sql.ResultSet, java.lang.String, byte[], javax.jms.BytesMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResult</h4>
<pre>protected static&nbsp;int&nbsp;getResult(int&nbsp;type,
            java.sql.ResultSet&nbsp;rset,
            java.lang.String&nbsp;key,
            byte[]&nbsp;buffer,
            javax.jms.BytesMessage&nbsp;msg)
                        throws java.sql.SQLException,
                               javax.jms.JMSException</pre>
<div class="block">It retrieves BLOB data or LONGVARBINARY data as well as other data from
 the resultset and puts them into the BytesMessage.  Upon success, it
 returns the number of records retrieved.  Otherwise, it returns -1
 indicating there is no BLOB data or LONGVARBINARY data found.
<br/><br/>
 The BLOB data or the LONGVARBINARY data in the last position will be put
 into the message body.  The rest will be formatted into the field
 specified by the given key.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="reconnect()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reconnect</h4>
<pre>public&nbsp;java.lang.String&nbsp;reconnect()</pre>
<div class="block">reconnects to the DB and returns null on success or err msg otherwise</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Connector.html#reconnect()">reconnect</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Connector.html" title="interface in org.qbroker.common">Connector</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/net/DBConnector.html#reconnect()">reconnect</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">DBConnector</a></code></dd>
</dl>
</li>
</ul>
<a name="acknowledge(long[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acknowledge</h4>
<pre>public&nbsp;void&nbsp;acknowledge(long[]&nbsp;state)
                 throws javax.jms.JMSException</pre>
<div class="block">checks in the prepared statement and removes the asset for the result set</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="destroyObject(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroyObject</h4>
<pre>public&nbsp;void&nbsp;destroyObject(java.lang.Object&nbsp;obj)</pre>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Connector.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Connector.html" title="interface in org.qbroker.common">Connector</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../org/qbroker/net/DBConnector.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/net/DBConnector.html" title="class in org.qbroker.net">DBConnector</a></code></dd>
</dl>
</li>
</ul>
<a name="getOperation()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/HTTPMessenger.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/JMSEvent.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/JDBCMessenger.html" target="_top">Frames</a></li>
<li><a href="JDBCMessenger.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.net.DBConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
