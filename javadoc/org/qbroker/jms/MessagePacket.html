<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sun Jun 11 07:39:10 EDT 2017 -->
<title>MessagePacket</title>
<meta name="date" content="2017-06-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MessagePacket";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/MessageOutputStream.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/MessageStream.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/MessagePacket.html" target="_top">Frames</a></li>
<li><a href="MessagePacket.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.jms</div>
<h2 title="Class MessagePacket" class="title">Class MessagePacket</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.qbroker.jms.MessagePacket</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">MessagePacket</span>
extends java.lang.Object</pre>
<div class="block">MessagePacket handles JMS Messages IO on DatagramSocket.  The DatagramSocket
 has to be established before using this object.
<br/><br/>
 There are four methods, listen(), talk(), inquire() and reply() on packets.
 The method of listen() is NOT MT-Safe.  The method of talk() is for
 asynchronous output whereas inquire() is for synchronous requests.
<br/><br/>
 In case of charSet and encoding, you can overwrite the default encoding by
 starting JVM with "-Dfile.encoding=ISO8859_1 your_class".
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#MessagePacket(java.util.Map)">MessagePacket</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#getOperation()">getOperation</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#inquire(org.qbroker.common.XQueue, java.net.DatagramSocket)">inquire</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
       java.net.DatagramSocket&nbsp;sock)</code>
<div class="block">It listens to an XQueue for JMS Messages and converts the content of
 the message into a packet as a request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#listen(java.net.DatagramSocket, org.qbroker.common.XQueue)">listen</a></strong>(java.net.DatagramSocket&nbsp;in,
      <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It listens to the DatagramSocket for incoming DatagramPackets.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#reply(java.net.DatagramSocket, org.qbroker.common.XQueue)">reply</a></strong>(java.net.DatagramSocket&nbsp;sock,
     <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It listens to a DatagramSocket for incoming DatagramPackets and converts
 the packet into a JMS message as a request.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/MessagePacket.html#talk(org.qbroker.common.XQueue, java.net.DatagramSocket)">talk</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
    java.net.DatagramSocket&nbsp;out)</code>
<div class="block">It continually gets a JMS Message from the XQueue, loads its content
 to a DatagramPacket according to the format rules and sends the packet
 to the DatagramSocket.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MessagePacket(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MessagePacket</h4>
<pre>public&nbsp;MessagePacket(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="listen(java.net.DatagramSocket, org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>listen</h4>
<pre>public&nbsp;long&nbsp;listen(java.net.DatagramSocket&nbsp;in,
          <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
            throws java.io.IOException,
                   javax.jms.JMSException</pre>
<div class="block">It listens to the DatagramSocket for incoming DatagramPackets.  Once
 receiving a DatagramPacket, it loads the payload of the packet to a
 JMSMessage and puts it to the XQueue as output.
<br/><br/>
 Most of the IOExceptions from the stream IO operations, like receive,
 will be thrown to notify the caller.  The caller is supposed to catch
 the exception, either to reset the socket or to do other stuff.
 It also throws JMSException from the operations regarding to the message
 itself, like get/set JMS properties.  This does not require to reset
 the socket at all.
<br/><br/>
 This method is NOT MT-Safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="reply(java.net.DatagramSocket, org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reply</h4>
<pre>public&nbsp;long&nbsp;reply(java.net.DatagramSocket&nbsp;sock,
         <a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
           throws java.io.IOException,
                  javax.jms.JMSException</pre>
<div class="block">It listens to a DatagramSocket for incoming DatagramPackets and converts
 the packet into a JMS message as a request.  Once
 receiving a DatagramPacket, it loads the payload of the packet to a
 JMSMessage and puts it to the XQueue as output.  Meanwhile, it checks
 the XQueue for the feedback messages.  Once it finds one, the content
 of the message will be sent out as the reply.
<br/><br/>
 Most of the IOExceptions from the packet IO operations, like receive,
 will be thrown to notify the caller.  The caller is supposed to catch
 the exception, either to reset the socket or to do other stuff.
 It also throws JMSException from the operations regarding to the message
 itself, like get/set JMS properties.  This does not require to reset
 the socket at all.
<br/><br/>
 This method is NOT MT-Safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="inquire(org.qbroker.common.XQueue, java.net.DatagramSocket)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inquire</h4>
<pre>public&nbsp;long&nbsp;inquire(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
           java.net.DatagramSocket&nbsp;sock)
             throws java.io.IOException,
                    javax.jms.JMSException</pre>
<div class="block">It listens to an XQueue for JMS Messages and converts the content of
 the message into a packet as a request.  Once receiving a message,
 it loads its content to a DatagramPacket according to the format
 rules and sends the packet to the DatagramSocket.  Meanwhile, it
 listens to the DatagramSocket for reply packet and sends the reply
 back to the XQueue if there is one.
<br/><br/>
 Most of the IOExceptions from the packet IO operations, like send,
 will be thrown to notify the caller.  The caller is supposed to catch
 the exception, either to reset the socket or to do other stuff.
 It also throws JMSException from the operations regarding to the message
 itself, like get/set JMS properties.  This does not require to reset
 the socket at all.
<br/><br/>
 Since the inquire operation relies on a request, this method will
 intercept the request and process it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the inquirey is successful.  This method will
 not acknowledge messages.  It is up to the requester to do that.
<br/><br/>
 This method is NOT MT-Safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="talk(org.qbroker.common.XQueue, java.net.DatagramSocket)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>talk</h4>
<pre>public&nbsp;long&nbsp;talk(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
        java.net.DatagramSocket&nbsp;out)
          throws java.io.IOException,
                 javax.jms.JMSException</pre>
<div class="block">It continually gets a JMS Message from the XQueue, loads its content
 to a DatagramPacket according to the format rules and sends the packet
 to the DatagramSocket.
<br/><br/>
 Most of the IOExceptions from the packet IO operations, like send,
 will be thrown to notify the caller.  The caller is supposed to catch
 the exception, either to reset the socket or to do other stuff.
 It also throws JMSException from the operations regarding to the message
 itself, like get/set JMS properties.  This does not require to reset
 the socket at all.
<br/><br/>
 It will not modify the original messages.  If the XQueue has enabled
 the EXTERNAL_XA, it will also acknowledge every messages.  This method
 is MT-Safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="getOperation()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/MessageOutputStream.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/MessageStream.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/MessagePacket.html" target="_top">Frames</a></li>
<li><a href="MessagePacket.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
