<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sun Jun 11 07:39:09 EDT 2017 -->
<title>TextSubstitution</title>
<meta name="date" content="2017-06-11">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TextSubstitution";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/common/Term.html" title="class in org.qbroker.common"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/common/ThreadPool.html" title="class in org.qbroker.common"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/common/TextSubstitution.html" target="_top">Frames</a></li>
<li><a href="TextSubstitution.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.common</div>
<h2 title="Class TextSubstitution" class="title">Class TextSubstitution</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.qbroker.common.TextSubstitution</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TextSubstitution</span>
extends java.lang.Object</pre>
<div class="block">TextSubstitution takes a Perl5 substitution expression and parses it into
 the Pattern part and the Substitution part.  It also supports something
 like "s/a/b/gm" where m means applying the substitution on each lines.
 Its method of substitute() applies the Perl5 substitution on an input
 string and returns the result.  It supports the substitution between
 LineFeed (\n) and CarrigeReturn (\r). It also supports the substitution like
 "s/a/c/g" or "s/c/b/g" where c is the hexdecimal char, such as \x02.
<br/><br/>
 It also supports expressions in a different way as compared to Perl5.
 In this case, the substitution expression is supposed to be something like
 "s//?=xxx/e" where 'e' at the end indicates the expression substitution.
 It is assumed that the text in the context will be treated as the input
 string which will be parsed into whatever type of data.  When you call the
 method of substitute(), please make sure to check the returned string.
 It should never be null nor empty.  Otherwise, something is wrong.  The
 caller is supposed to log the details or to throw exception with details.
 Here lists all supported exressions:
 <table>
 <tr><th>Expression</th><th>Operation</th><th>Type</th><th>Example</th></tr>
 <tr><td>s//+=n/e</td><td>Add</td><td>Number</td><td>s//+=3/e</td></tr>
 <tr><td>s//-=n/e</td><td>Substract</td><td>Number</td><td>s//-=3/e</td></tr>
 <tr><td>s//*=n/e</td><td>Multiply</td><td>Number</td><td>s//*=3/e</td></tr>
 <tr><td>s///=n/e</td><td>Devide</td><td>Number</td><td>s///=3/e</td></tr>
 <tr><td>s//%=n/e</td><td>Modulate</td><td>Integer</td><td>s//%=3/e</td></tr>
 <tr><td>s//~=s/e</td><td>Parse</td><td>Time Pattern</td><td>s//~=MMM d HH:mm:ss yyyy/e</td></tr>
 <tr><td>s//#=s/e</td><td>Format</td><td>Time Pattern</td><td>s//#=yyyy-MM-dd HH:mm:ss.SSS/e</td></tr>
 <tr><td>s//?=s/e</td><td>Condition</td><td>String</td><td>s//?=[0,100]15/e</td></tr>
 <tr><td>s//:=lower/e</td><td>toLowerCase</td><td>String</td><td>s//:=lower/e</td></tr>
 <tr><td>s//:=upper/e</td><td>toUperCase</td><td>String</td><td>s//:=uper/e</td></tr>
 <tr><td>s//:=encode/e</td><td>URLEncode</td><td>String</td><td>s//:=encode/e</td></tr>
 <tr><td>s//:=decode/e</td><td>URLDecode</td><td>String</td><td>s//:=decode/e</td></tr>
 <tr><td>s//:=time/e</td><td>CurrentTimeMillis</td><td>String</td><td>s//:=time/e</td></tr>
 <tr><td>s//:=rand/e</td><td>Random Number</td><td>Number</td><td>s//:=rand 1.0/e</td></tr>
 <tr><td>s//:=pow d/e</td><td>Power</td><td>Real Number</td><td>s//:=pow 0.5/e</td></tr>
 <tr><td>s//:=sqrt/e</td><td>Square Root</td><td>Number</td><td>s//:=sqrt/e</td></tr>
 <tr><td>s//:=abs/e</td><td>Absolute Value</td><td>Number</td><td>s//:=abs/e</td></tr>
 <tr><td>s//:=eval/e</td><td>Evaluation</td><td>Number or String</td><td>s//:=eval/e</td></tr>
 <tr><td>s//:=md5/e</td><td>MD5 Checksum</td><td>String</td><td>s//:=md5/e</td></tr>
 <tr><td>s//:=chop/e</td><td>Chop</td><td>String</td><td>s//:=chop/e</td></tr>
 <tr><td>s//:=replace d/e</td><td>Search Replace</td><td>String</td><td>s//:=replace !/e</td></tr>
 <tr><td>s//:=sub d/e</td><td>regex replaceFirst</td><td>String</td><td>s//:=sub !/e</td></tr>
 <tr><td>s//:=gsub d/e</td><td>regex replaceAll</td><td>String</td><td>s//:=gsub !/e</td></tr>
 </table>
 For eval(), it applies to a template with a simple numeric expression for
 numbers or a ternary expression on numbers or single quoted strings. In case
 of string, the result string will have the quotes trimmed off.
 For replace(), the following parameter, d, is the delimiter used to parse
 the text of the template. The text of the template should contain 3 parts
 delimitered by the delimiter, d. The first part is the original text to be
 processed. The second part is the string to search for in the first part.
 The last part is the string as the replacement. For sub() or gsub(), it
 replaces either the first regex match or all the regex maches with the
 replacement. So the second part is a regex string.
 <br/><br/>
 The constructor may throw any errors in initialization of the substitution.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#TextSubstitution(java.lang.String)">TextSubstitution</a></strong>(java.lang.String&nbsp;expression)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#TextSubstitution(java.lang.String, java.lang.String)">TextSubstitution</a></strong>(java.lang.String&nbsp;name,
                java.lang.String&nbsp;expression)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#clear()">clear</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#getName()">getName</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>org.apache.oro.text.regex.Pattern</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#getPattern()">getPattern</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#getScope()">getScope</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>org.apache.oro.text.regex.Substitution</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#getSubstitution()">getSubstitution</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,<a href="../../../org/qbroker/common/TextSubstitution.html" title="class in org.qbroker.common">TextSubstitution</a>[]&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#getSubstitutionMap(java.util.Map)">getSubstitutionMap</a></strong>(java.util.Map&nbsp;map)</code>
<div class="block">returns a Map with the key-value pair to a set of TextSubstitutions</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#substitute(java.lang.String)">substitute</a></strong>(java.lang.String&nbsp;input)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/common/TextSubstitution.html#substitute(java.lang.String, int)">substitute</a></strong>(java.lang.String&nbsp;input,
          int&nbsp;numSubs)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TextSubstitution(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TextSubstitution</h4>
<pre>public&nbsp;TextSubstitution(java.lang.String&nbsp;name,
                java.lang.String&nbsp;expression)</pre>
</li>
</ul>
<a name="TextSubstitution(java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TextSubstitution</h4>
<pre>public&nbsp;TextSubstitution(java.lang.String&nbsp;expression)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="substitute(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>substitute</h4>
<pre>public&nbsp;java.lang.String&nbsp;substitute(java.lang.String&nbsp;input,
                          int&nbsp;numSubs)</pre>
</li>
</ul>
<a name="substitute(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>substitute</h4>
<pre>public&nbsp;java.lang.String&nbsp;substitute(java.lang.String&nbsp;input)</pre>
</li>
</ul>
<a name="getPattern()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPattern</h4>
<pre>public&nbsp;org.apache.oro.text.regex.Pattern&nbsp;getPattern()</pre>
</li>
</ul>
<a name="getSubstitution()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSubstitution</h4>
<pre>public&nbsp;org.apache.oro.text.regex.Substitution&nbsp;getSubstitution()</pre>
</li>
</ul>
<a name="getScope()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getScope</h4>
<pre>public&nbsp;int&nbsp;getScope()</pre>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
<a name="getSubstitutionMap(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSubstitutionMap</h4>
<pre>public static&nbsp;java.util.Map&lt;java.lang.String,<a href="../../../org/qbroker/common/TextSubstitution.html" title="class in org.qbroker.common">TextSubstitution</a>[]&gt;&nbsp;getSubstitutionMap(java.util.Map&nbsp;map)</pre>
<div class="block">returns a Map with the key-value pair to a set of TextSubstitutions</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/common/Term.html" title="class in org.qbroker.common"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/common/ThreadPool.html" title="class in org.qbroker.common"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/common/TextSubstitution.html" target="_top">Frames</a></li>
<li><a href="TextSubstitution.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
