<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Jul 13 07:39:53 EDT 2019 -->
<title>NNTPMessenger</title>
<meta name="date" content="2019-07-13">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NNTPMessenger";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/Msg2Text.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/ObjectEvent.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/NNTPMessenger.html" target="_top">Frames</a></li>
<li><a href="NNTPMessenger.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.net.NNTPConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.jms</div>
<h2 title="Class NNTPMessenger" class="title">Class NNTPMessenger</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/net/NNTPConnector.html" title="class in org.qbroker.net">org.qbroker.net.NNTPConnector</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.jms.NNTPMessenger</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../org/qbroker/common/Connector.html" title="interface in org.qbroker.common">Connector</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">NNTPMessenger</span>
extends <a href="../../../org/qbroker/net/NNTPConnector.html" title="class in org.qbroker.net">NNTPConnector</a></pre>
<div class="block">NNTPMessenger connects to an NNTP server and initializes one of the
 operations, such as fetch, retrieve and post.  It carries out the
 operation with JMS Messages.
<br/><br/>
 There are three methods, fetch(), retrieve(), list() and post().  The
 first method, fetch(), is used to fetch new articles from NNTP servers.
 The method of retrieve() is used for synchronous requests.  The method of
 post() is used for asynchronous posting content to the NNTP server.
<br/><br/>
 This is NOT MT-Safe.  Therefore, you need to use multiple instances to
 achieve your MT goal.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.net.NNTPConnector">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/NNTPConnector.html" title="class in org.qbroker.net">NNTPConnector</a></h3>
<code><a href="../../../org/qbroker/net/NNTPConnector.html#ARTICLE_ALL">ARTICLE_ALL</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#ARTICLE_BODY">ARTICLE_BODY</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#ARTICLE_HEADER">ARTICLE_HEADER</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#hostname">hostname</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#isConnected">isConnected</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#maxArticle">maxArticle</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#password">password</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#port">port</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#timeout">timeout</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#uri">uri</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#username">username</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#NNTPMessenger(java.util.Map)">NNTPMessenger</a></strong>(java.util.Map&nbsp;props)</code>
<div class="block">Creates new NNTPMessenger</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#fetch(org.qbroker.common.XQueue)">fetch</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It fetches new articles of a news group from the NNTP server and puts
 them to the XQ.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#getOperation()">getOperation</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#list(org.qbroker.common.XQueue)">list</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from xq that contains a newsgroup name for listing
 articles in it and gets the list via nntp.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#post(org.qbroker.common.XQueue)">post</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS Message from the XQueue and posts its content into the
 NNTP server continuously.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/jms/NNTPMessenger.html#retrieve(org.qbroker.common.XQueue)">retrieve</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>
<div class="block">It gets a JMS message from xq that contains the information about an
 article to be retrieved and retrieves the article via nntp.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.qbroker.net.NNTPConnector">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.net.<a href="../../../org/qbroker/net/NNTPConnector.html" title="class in org.qbroker.net">NNTPConnector</a></h3>
<code><a href="../../../org/qbroker/net/NNTPConnector.html#close()">close</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#connect()">connect</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getArticleInfo(int)">getArticleInfo</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getArticleInfo(int, int)">getArticleInfo</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getArticleInfo(java.lang.String, int, long)">getArticleInfo</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getDate(org.apache.commons.net.nntp.Article)">getDate</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getNNTPClient()">getNNTPClient</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getReplyString()">getReplyString</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#getURI()">getURI</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#isAllowedToPost()">isAllowedToPost</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#isConnected()">isConnected</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#main(java.lang.String[])">main</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpGet(java.lang.StringBuffer, java.lang.String)">nntpGet</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpGet(java.lang.StringBuffer, java.lang.String, int)">nntpGet</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpListArticles(java.lang.String, long)">nntpListArticles</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpListGroups(java.lang.String, long)">nntpListGroups</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpPost(java.lang.String, java.lang.String)">nntpPost</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#nntpPost(java.lang.String, java.lang.String, java.lang.String)">nntpPost</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#reconnect()">reconnect</a>, <a href="../../../org/qbroker/net/NNTPConnector.html#setNewsgroup(java.lang.String)">setNewsgroup</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NNTPMessenger(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NNTPMessenger</h4>
<pre>public&nbsp;NNTPMessenger(java.util.Map&nbsp;props)
              throws java.io.IOException</pre>
<div class="block">Creates new NNTPMessenger</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="fetch(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fetch</h4>
<pre>public&nbsp;void&nbsp;fetch(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
           throws java.io.IOException,
                  javax.jms.JMSException</pre>
<div class="block">It fetches new articles of a news group from the NNTP server and puts
 them to the XQ. It is NOT reentry safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="retrieve(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>retrieve</h4>
<pre>public&nbsp;void&nbsp;retrieve(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
              throws java.io.IOException,
                     <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                     javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from xq that contains the information about an
 article to be retrieved and retrieves the article via nntp.  It puts
 the header info into the message header and puts the content of the
 article into the message body and sends it back.  The requester at the
 other end of the XQueue can easily read the content out of the message.
<br/><br/>
 Since the retrieve operation relies on a request, this method will  
 intercept the request and process it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the retrieve is successful.  Otherwise, the
 message body will not contain the content out of retrieve operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="list(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>list</h4>
<pre>public&nbsp;void&nbsp;list(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
          throws java.io.IOException,
                 <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                 javax.jms.JMSException</pre>
<div class="block">It gets a JMS message from xq that contains a newsgroup name for listing
 articles in it and gets the list via nntp.  It puts the list of articles
 into the message body one articleID per line and sends it back.  The
 requester at the other end of the XQueue can easily read the list out
 of the message.
<br/><br/>
 Since the list operation relies on a request, this method will
 intercept the request and process it.  The incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is required to
 check the value of the property once it gets the message back.  If
 the return code is 0, the list is successful.  Otherwise, the
 message body will not contain the content out of the list operation.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="post(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>post</h4>
<pre>public&nbsp;void&nbsp;post(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)
          throws java.io.IOException,
                 <a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a>,
                 javax.jms.JMSException</pre>
<div class="block">It gets a JMS Message from the XQueue and posts its content into the
 NNTP server continuously.
<br/><br/>
 It will always try to retrieve the header info from the message based
 on HeaderField property.  If the message does not contain the header
 info, the method will use the default header.
<br/><br/>
 The post operation also supports the requests.  If the XAMode has
 enabled the XA_CLIENT bit, it will treat the message as a request from
 the uplink.  In this case, the incoming message is required
 to be writeable.  The method will set a String property of the message
 specified by the RCField with the return code, indicating the status
 of the process to fulfill the request.  The requester is supposed to
 check the value of the property once it gets the message back.  If
 the return code is 0, the operation is successful.  Otherwise, the
 request will be dropped due to failures.  On the other hand, if the
 XA_CLIENT bit has been disabled by XAMode, the incoming message will
 not be modified.
<br/><br/>
 If the MaxIdleTime is set to none-zero, it will monitor the idle time
 and will throw TimeoutException once the idle time exceeds MaxIdleTime.
 it is up to the caller to handle this exception.
<br/><br/>
 If the XQueue has enabled the EXTERNAL_XA bit, it will also acknowledge
 the messages.  This method is MT-Safe.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.IOException</code></dd>
<dd><code><a href="../../../org/qbroker/common/TimeoutException.html" title="class in org.qbroker.common">TimeoutException</a></code></dd>
<dd><code>javax.jms.JMSException</code></dd></dl>
</li>
</ul>
<a name="getOperation()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/jms/Msg2Text.html" title="class in org.qbroker.jms"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/jms/ObjectEvent.html" title="class in org.qbroker.jms"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/jms/NNTPMessenger.html" target="_top">Frames</a></li>
<li><a href="NNTPMessenger.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.net.NNTPConnector">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
