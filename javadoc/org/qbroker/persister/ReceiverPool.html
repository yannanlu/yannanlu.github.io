<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Sat Mar 10 17:01:40 EST 2018 -->
<title>ReceiverPool</title>
<meta name="date" content="2018-03-10">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ReceiverPool";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/persister/PersisterPool.html" title="class in org.qbroker.persister"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/persister/RedisPersister.html" title="class in org.qbroker.persister"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/persister/ReceiverPool.html" target="_top">Frames</a></li>
<li><a href="ReceiverPool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.persister.Persister">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.persister</div>
<h2 title="Class ReceiverPool" class="title">Class ReceiverPool</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">org.qbroker.persister.Persister</a></li>
<li>
<ul class="inheritance">
<li>org.qbroker.persister.ReceiverPool</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable, <a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ReceiverPool</span>
extends <a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a>
implements java.lang.Runnable</pre>
<div class="block">ReceiverPool listens to an XQueue for requests carried by ObjectMessages.
 Once there is a new request, it will check the URI and the type to figure
 out the details of the request.  If the request is to ask for a receiver,
 it first looks up the classname of the implementation based on the URI
 and the given properties.  Then ReceiverPool tries to check out the pool
 of the classname from the cache.  If there exists the receiver pool for
 the implementation, it just checks out a new instance of the receiver
 with the given properties.  Otherwise, ReceiverPool will create a new pool
 for the classname and checks out a new instance of the receiver from it.
 It then starts up a new thread on the receiver and returns the thread back.
 The requester is supposed to monitor the status of the thread in order to
 tell the status of the receiver.  The requester is also able to control the
 receiver via the associated transmit queue.  ReceiverPool will frequently
 monitor the status of each active receivers in every heartbeat.  If any one
 of them is stopped or closed, ReceiverPool will checkin the receiver and 
 clean up the cache.  If the request is to return the used thread, it will
 check in both the thread and the receiver.
<br/><br/>
 URI is used to identify the source destinations.  ReceiverPool parses the
 URI string and creates a Map with all properties from the key-value
 pairs specified in the query-string.  Therefore, please carefully define
 them in the query-string of the URI.  ReceiverPool also allows the
 default properties defined for each implementations.  If any of the default
 properties is missing in the URI, ReceiverPool will copy it to the
 property Map before the instantiation of the MessageReceiver.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.persister.Persister">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></h3>
<code><a href="../../../org/qbroker/persister/Persister.html#capacity">capacity</a>, <a href="../../../org/qbroker/persister/Persister.html#displayMask">displayMask</a>, <a href="../../../org/qbroker/persister/Persister.html#linkName">linkName</a>, <a href="../../../org/qbroker/persister/Persister.html#maxRetry">maxRetry</a>, <a href="../../../org/qbroker/persister/Persister.html#operation">operation</a>, <a href="../../../org/qbroker/persister/Persister.html#partition">partition</a>, <a href="../../../org/qbroker/persister/Persister.html#pauseTime">pauseTime</a>, <a href="../../../org/qbroker/persister/Persister.html#propertyName">propertyName</a>, <a href="../../../org/qbroker/persister/Persister.html#repeatPeriod">repeatPeriod</a>, <a href="../../../org/qbroker/persister/Persister.html#standbyTime">standbyTime</a>, <a href="../../../org/qbroker/persister/Persister.html#status">status</a>, <a href="../../../org/qbroker/persister/Persister.html#timeout">timeout</a>, <a href="../../../org/qbroker/persister/Persister.html#tolerance">tolerance</a>, <a href="../../../org/qbroker/persister/Persister.html#uri">uri</a>, <a href="../../../org/qbroker/persister/Persister.html#waitTime">waitTime</a>, <a href="../../../org/qbroker/persister/Persister.html#xaMode">xaMode</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.persister.MessagePersister">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></h3>
<code><a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_CLOSED">PSTR_CLOSED</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_DISABLED">PSTR_DISABLED</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_PAUSE">PSTR_PAUSE</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_READY">PSTR_READY</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_RETRYING">PSTR_RETRYING</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_RUNNING">PSTR_RUNNING</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_STANDBY">PSTR_STANDBY</a>, <a href="../../../org/qbroker/persister/MessagePersister.html#PSTR_STOPPED">PSTR_STOPPED</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#ReceiverPool(java.util.Map)">ReceiverPool</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#close()">close</a></strong>()</code>
<div class="block">closes all opened resources</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#finalize()">finalize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#lookup(java.lang.String, java.util.Map)">lookup</a></strong>(java.lang.String&nbsp;uriStr,
      java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;props)</code>
<div class="block">returns className and fills up parameters to props</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#mapURI(java.lang.String, java.util.Map)">mapURI</a></strong>(java.lang.String&nbsp;uri,
      java.util.Map&nbsp;props)</code>
<div class="block">It is a utility to parse URI and update property Map to set some
 mandatory properties, like ClassName, for receivers.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#persist(org.qbroker.common.XQueue, int)">persist</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
       int&nbsp;baseTime)</code>
<div class="block">gets all the JMS messages from the XQueue and delivers them to
 their destinations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#run()">run</a></strong>()</code>
<div class="block">runs the current thread to receive messages to the given XQueue.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/persister/ReceiverPool.html#split(java.lang.String, java.lang.String, java.lang.String, java.util.Map)">split</a></strong>(java.lang.String&nbsp;s,
     java.lang.String&nbsp;e,
     java.lang.String&nbsp;text,
     java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;attr)</code>
<div class="block">splits text with the pair delimiter of s and and key delimiter of e
 and fills the key-value pair to Map</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_org.qbroker.persister.Persister">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;org.qbroker.persister.<a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></h3>
<code><a href="../../../org/qbroker/persister/Persister.html#getCapacity()">getCapacity</a>, <a href="../../../org/qbroker/persister/Persister.html#getLinkName()">getLinkName</a>, <a href="../../../org/qbroker/persister/Persister.html#getName()">getName</a>, <a href="../../../org/qbroker/persister/Persister.html#getOperation()">getOperation</a>, <a href="../../../org/qbroker/persister/Persister.html#getStatus()">getStatus</a>, <a href="../../../org/qbroker/persister/Persister.html#getXAMode()">getXAMode</a>, <a href="../../../org/qbroker/persister/Persister.html#isStopped(org.qbroker.common.XQueue)">isStopped</a>, <a href="../../../org/qbroker/persister/Persister.html#keepRunning(org.qbroker.common.XQueue)">keepRunning</a>, <a href="../../../org/qbroker/persister/Persister.html#resetStatus(int, int)">resetStatus</a>, <a href="../../../org/qbroker/persister/Persister.html#setStatus(int)">setStatus</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ReceiverPool(java.util.Map)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ReceiverPool</h4>
<pre>public&nbsp;ReceiverPool(java.util.Map&nbsp;props)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="persist(org.qbroker.common.XQueue, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>persist</h4>
<pre>public&nbsp;void&nbsp;persist(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq,
           int&nbsp;baseTime)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html#persist(org.qbroker.common.XQueue, int)">MessagePersister</a></code></strong></div>
<div class="block">gets all the JMS messages from the XQueue and delivers them to
 their destinations.  In case of failure, it should keep retry with
 the sleepTime in milliseconds.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/MessagePersister.html#persist(org.qbroker.common.XQueue, int)">persist</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/Persister.html#persist(org.qbroker.common.XQueue, int)">persist</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></code></dd>
</dl>
</li>
</ul>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<div class="block">runs the current thread to receive messages to the given XQueue.
 If it exits abnormally, it will check-in the receiver and set
 the asset status to RCVR_CLOSED.  Otherwise, the status will be
 set to RCVR_STOPPED to indicate the asset needs to be cleaned up.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="lookup(java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookup</h4>
<pre>public static&nbsp;java.lang.String&nbsp;lookup(java.lang.String&nbsp;uriStr,
                      java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;props)</pre>
<div class="block">returns className and fills up parameters to props</div>
</li>
</ul>
<a name="split(java.lang.String, java.lang.String, java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>split</h4>
<pre>public static&nbsp;int&nbsp;split(java.lang.String&nbsp;s,
        java.lang.String&nbsp;e,
        java.lang.String&nbsp;text,
        java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;attr)</pre>
<div class="block">splits text with the pair delimiter of s and and key delimiter of e
 and fills the key-value pair to Map</div>
</li>
</ul>
<a name="mapURI(java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>mapURI</h4>
<pre>public static&nbsp;java.lang.String&nbsp;mapURI(java.lang.String&nbsp;uri,
                      java.util.Map&nbsp;props)
                               throws java.net.URISyntaxException</pre>
<div class="block">It is a utility to parse URI and update property Map to set some
 mandatory properties, like ClassName, for receivers.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>java.net.URISyntaxException</code></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html#close()">MessagePersister</a></code></strong></div>
<div class="block">closes all opened resources</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/MessagePersister.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/persister/Persister.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../org/qbroker/persister/Persister.html" title="class in org.qbroker.persister">Persister</a></code></dd>
</dl>
</li>
</ul>
<a name="finalize()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>finalize</h4>
<pre>protected&nbsp;void&nbsp;finalize()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code>finalize</code>&nbsp;in class&nbsp;<code>java.lang.Object</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/persister/PersisterPool.html" title="class in org.qbroker.persister"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/persister/RedisPersister.html" title="class in org.qbroker.persister"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/persister/ReceiverPool.html" target="_top">Frames</a></li>
<li><a href="ReceiverPool.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_org.qbroker.persister.Persister">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
