<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_51) on Mon May 22 16:03:51 EDT 2017 -->
<title>MonitorAgent</title>
<meta name="date" content="2017-05-22">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="MonitorAgent";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/flow/MessageFlow.html" title="class in org.qbroker.flow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/flow/QClient.html" title="class in org.qbroker.flow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/flow/MonitorAgent.html" target="_top">Frames</a></li>
<li><a href="MonitorAgent.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">org.qbroker.flow</div>
<h2 title="Class MonitorAgent" class="title">Class MonitorAgent</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>org.qbroker.flow.MonitorAgent</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>java.lang.Runnable, <a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">MonitorAgent</span>
extends java.lang.Object
implements <a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a>, java.lang.Runnable</pre>
<div class="block">MonitorAgent is a Java container hosting multiple MonitorGroups
 and MessageFlows.  The MonitorGroup contains various monitors that
 periodically check if something have happened.  Whereas the MessageFlow
 is to process messages for on-demand services.
<br/><br/>
 An MonitorAgent periodically runs the registered monitors.
 Registered monitors are grouped according to their dependencies.
 The monitors in a same group are guaranteed to be checked in the
 same order as they are in the group.  However, the order of different
 groups is not honored by MonitorAgent due to MT implementation.
<br/><br/>
 Each registered monitore contains three components, a MonitorReport
 to generate the latest report on the monitored object, a MonitorAction
 to handle the monitor report, and a set of time windows in which the
 monitor is expected to be active.  It first calls
 MonitorReport.generateReport(currentTime) that returns a report in
 a Map object.  If there is no any exceptions, it checks the latest
 monitor time with the predefined configuration of the time windows,
 defined in ActiveTime, to see if the monitor is late or in time.
 The result is passed through in status.  No matter what status is,
 the MonitorAction.performAction(status, currentTime, report) will always
 be called.
<br/><br/>
 If an exception is thrown by MonitorReport.generateReport(currentTime),
 the content of the report is invalid.  It does not make sense to check
 on the invalid report.  Therefore MonitorAgent always catches the
 exception and skips both the checking process and the action if any
 exception is caught.
<br/><br/>
 It is up to developers to implement both interfaces of MonitorReport
 and MonitorAction.  The return object of
 MonitorReport.generateReport(currentTime) is a Map.  It is
 an opaque container for developers to put anything about the monitor report
 in it.  It may be the status code indicating the latest status or anything,
 or the timestamp of a file, or a ResultSet of a database query, etc, as long
 as the associated action knows how to retrieve them.
<br/><br/>
 MonitorAgent also supports shared information.  Some of the reports
 can have their test results shared with others as the dependencies or
 merged into a new report.  The shared information is called the internal
 report that is a Map, too.  The other objects can access them via
 ReportQuery report.
<br/><br/>
 You can disable all the monitor groups via some monitor jobs.  To do that,
 you have to define the report and specify the correct ReportMode.
<br/><br/>
 MonitorAgent also can be configured to pick up its configuration
 changes automatically from the configuration repository.  The object
 needs to be defined in the default group. Its name must be specified within
 ConfigRepository tag.
<br/><br/>
 MonitorAgent can also host multiple message flows.  A message flow
 is a message driven application for message broker service.  With the
 message flow, you can have MonitorAgent to pick up and deliver
 JMS messages via various transports.  In order to configure a message flow,
 you need to define Receivers, Nodes and Persisters under MessageFlow list.
 For detailed information, please reference the docs for QFlow.
<br/><br/>
 The default MessageFlow is the flow with the name of default.  It is the
 dedicated MessageFlow for event escalations.  It shoule be always the first
 message flow if it is defined.  In this case, URL should not be defined in
 the master configuration file since all the events will be escalated by the
 default MessageFlow.
<br/></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>yannanlu@yahoo.com</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#FILE_SEPARATOR">FILE_SEPARATOR</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#reportStatusText">reportStatusText</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_org.qbroker.common.Service">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;org.qbroker.common.<a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></h3>
<code><a href="../../../org/qbroker/common/Service.html#DEBUG_CTRL">DEBUG_CTRL</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_DIFF">DEBUG_DIFF</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_INIT">DEBUG_INIT</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_LOAD">DEBUG_LOAD</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_LOOP">DEBUG_LOOP</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_NONE">DEBUG_NONE</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_REPT">DEBUG_REPT</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_TRAN">DEBUG_TRAN</a>, <a href="../../../org/qbroker/common/Service.html#DEBUG_UPDT">DEBUG_UPDT</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_CLOSED">SERVICE_CLOSED</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_DISABLED">SERVICE_DISABLED</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_PAUSE">SERVICE_PAUSE</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_READY">SERVICE_READY</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_RETRYING">SERVICE_RETRYING</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_RUNNING">SERVICE_RUNNING</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_STANDBY">SERVICE_STANDBY</a>, <a href="../../../org/qbroker/common/Service.html#SERVICE_STOPPED">SERVICE_STOPPED</a>, <a href="../../../org/qbroker/common/Service.html#statusText">statusText</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#MonitorAgent(java.util.Map)">MonitorAgent</a></strong>(java.util.Map&nbsp;props)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#MonitorAgent(java.util.Map, int, java.lang.String)">MonitorAgent</a></strong>(java.util.Map&nbsp;props,
            int&nbsp;debugForReload,
            java.lang.String&nbsp;configFile)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#close()">close</a></strong>()</code>
<div class="block">closes all opened resources</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#doRequest(org.qbroker.common.Event, int)">doRequest</a></strong>(<a href="../../../org/qbroker/common/Event.html" title="interface in org.qbroker.common">Event</a>&nbsp;req,
         int&nbsp;timeout)</code>
<div class="block">It processes the request according to the preconfigured rulesets.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getDebugMode()">getDebugMode</a></strong>()</code>
<div class="block">returns the debug mode of the service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getName()">getName</a></strong>()</code>
<div class="block">returns the name of the service</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getOperation()">getOperation</a></strong>()</code>
<div class="block">returns the string of the operation</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.util.Map</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getPrivateReport()">getPrivateReport</a></strong>()</code>
<div class="block">returns the report map stored in the privateReport</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static java.util.Map&lt;java.lang.String,java.lang.Object&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getReport(java.lang.String)">getReport</a></strong>(java.lang.String&nbsp;rptName)</code>
<div class="block">returns a copy of the shared report</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String[]</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getReportNames()">getReportNames</a></strong>()</code>
<div class="block">returns all the names of the shared reports</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#getStatus()">getStatus</a></strong>()</code>
<div class="block">returns the status of the service</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#initReport(java.lang.String, long, int, int)">initReport</a></strong>(java.lang.String&nbsp;rptName,
          long&nbsp;currentTime,
          int&nbsp;status,
          int&nbsp;skippingStatus)</code>
<div class="block">initializes the static shared report without keyList</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#initReport(java.lang.String, java.lang.String[], java.util.Map, int)">initReport</a></strong>(java.lang.String&nbsp;rptName,
          java.lang.String[]&nbsp;keyList,
          java.util.Map&nbsp;latest,
          int&nbsp;reportMode)</code>
<div class="block">initializes the static shared report with keyList</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#keepRunning(org.qbroker.common.XQueue)">keepRunning</a></strong>(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#loadIncludedProperties(java.util.List, java.lang.String, int, java.util.Map, java.util.Map)">loadIncludedProperties</a></strong>(java.util.List&nbsp;group,
                      java.lang.String&nbsp;cfgDir,
                      int&nbsp;show,
                      java.util.Map&nbsp;props,
                      java.util.Map&nbsp;policy)</code>
<div class="block">It checks the loaded primay include on its ClassName for each string
 item of the given group.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#loadListProperties(java.util.List, java.lang.String, int, java.util.Map)">loadListProperties</a></strong>(java.util.List&nbsp;list,
                  java.lang.String&nbsp;configDir,
                  int&nbsp;show,
                  java.util.Map&nbsp;props)</code>
<div class="block">It loads the property map from configDir for each string item of the
 given list and adds the property map to the given props.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">The configuration parameters are stored in the property file,
 Agent.json, that lists all monitorGroups, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#query(org.qbroker.persister.MessagePersister, javax.jms.Message)">query</a></strong>(<a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a>&nbsp;pstr,
     javax.jms.Message&nbsp;msg)</code>
<div class="block">sends a query message via the given persister and waits for response.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#run()">run</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#setDebugMode(int)">setDebugMode</a></strong>(int&nbsp;debug)</code>
<div class="block">sets the debug mode of the service</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../org/qbroker/flow/MonitorAgent.html#start()">start</a></strong>()</code>
<div class="block">starts the main workflow and controls all groups of jobs and msg flows.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="FILE_SEPARATOR">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FILE_SEPARATOR</h4>
<pre>public static final&nbsp;java.lang.String FILE_SEPARATOR</pre>
</li>
</ul>
<a name="reportStatusText">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>reportStatusText</h4>
<pre>protected static final&nbsp;java.lang.String[] reportStatusText</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="MonitorAgent(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MonitorAgent</h4>
<pre>public&nbsp;MonitorAgent(java.util.Map&nbsp;props)</pre>
</li>
</ul>
<a name="MonitorAgent(java.util.Map, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>MonitorAgent</h4>
<pre>public&nbsp;MonitorAgent(java.util.Map&nbsp;props,
            int&nbsp;debugForReload,
            java.lang.String&nbsp;configFile)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="run()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>run</h4>
<pre>public&nbsp;void&nbsp;run()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code>run</code>&nbsp;in interface&nbsp;<code>java.lang.Runnable</code></dd>
</dl>
</li>
</ul>
<a name="initReport(java.lang.String, long, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initReport</h4>
<pre>public static&nbsp;void&nbsp;initReport(java.lang.String&nbsp;rptName,
              long&nbsp;currentTime,
              int&nbsp;status,
              int&nbsp;skippingStatus)</pre>
<div class="block">initializes the static shared report without keyList</div>
</li>
</ul>
<a name="initReport(java.lang.String, java.lang.String[], java.util.Map, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>initReport</h4>
<pre>public static&nbsp;void&nbsp;initReport(java.lang.String&nbsp;rptName,
              java.lang.String[]&nbsp;keyList,
              java.util.Map&nbsp;latest,
              int&nbsp;reportMode)</pre>
<div class="block">initializes the static shared report with keyList</div>
</li>
</ul>
<a name="getReport(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReport</h4>
<pre>public static&nbsp;java.util.Map&lt;java.lang.String,java.lang.Object&gt;&nbsp;getReport(java.lang.String&nbsp;rptName)</pre>
<div class="block">returns a copy of the shared report</div>
</li>
</ul>
<a name="getReportNames()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReportNames</h4>
<pre>public static&nbsp;java.lang.String[]&nbsp;getReportNames()</pre>
<div class="block">returns all the names of the shared reports</div>
</li>
</ul>
<a name="getPrivateReport()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPrivateReport</h4>
<pre>public static&nbsp;java.util.Map&nbsp;getPrivateReport()</pre>
<div class="block">returns the report map stored in the privateReport</div>
</li>
</ul>
<a name="start()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>start</h4>
<pre>public&nbsp;void&nbsp;start()</pre>
<div class="block">starts the main workflow and controls all groups of jobs and msg flows.
 It dispatches the job groups according to their schedules while
 listening on the escalation queue for escalations.</div>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#close()">Service</a></code></strong></div>
<div class="block">closes all opened resources</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="doRequest(org.qbroker.common.Event, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doRequest</h4>
<pre>public&nbsp;int&nbsp;doRequest(<a href="../../../org/qbroker/common/Event.html" title="interface in org.qbroker.common">Event</a>&nbsp;req,
            int&nbsp;timeout)</pre>
<div class="block">It processes the request according to the preconfigured rulesets.
 If timeout < 0, there is no wait.  If timeout > 0, it will wait for
 the processed event until timeout.  If timeout = 0, it blocks until
 the processed event is done.  It returns 1 for success, 0 for timed
 out and -1 for failure.  The method is MT-Safe.
<br/><br/>
 N.B., The input request will be modified for the response.  It is
 mutual-exclusive with the adminServer.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#doRequest(org.qbroker.common.Event, int)">doRequest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="keepRunning(org.qbroker.common.XQueue)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keepRunning</h4>
<pre>public&nbsp;boolean&nbsp;keepRunning(<a href="../../../org/qbroker/common/XQueue.html" title="interface in org.qbroker.common">XQueue</a>&nbsp;xq)</pre>
</li>
</ul>
<a name="getName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getName</h4>
<pre>public&nbsp;java.lang.String&nbsp;getName()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#getName()">Service</a></code></strong></div>
<div class="block">returns the name of the service</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#getName()">getName</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="getOperation()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOperation</h4>
<pre>public&nbsp;java.lang.String&nbsp;getOperation()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#getOperation()">Service</a></code></strong></div>
<div class="block">returns the string of the operation</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#getOperation()">getOperation</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="getStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatus</h4>
<pre>public&nbsp;int&nbsp;getStatus()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#getStatus()">Service</a></code></strong></div>
<div class="block">returns the status of the service</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#getStatus()">getStatus</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="getDebugMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDebugMode</h4>
<pre>public&nbsp;int&nbsp;getDebugMode()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#getDebugMode()">Service</a></code></strong></div>
<div class="block">returns the debug mode of the service</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#getDebugMode()">getDebugMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="setDebugMode(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDebugMode</h4>
<pre>public&nbsp;void&nbsp;setDebugMode(int&nbsp;debug)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../org/qbroker/common/Service.html#setDebugMode(int)">Service</a></code></strong></div>
<div class="block">sets the debug mode of the service</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../org/qbroker/common/Service.html#setDebugMode(int)">setDebugMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../org/qbroker/common/Service.html" title="interface in org.qbroker.common">Service</a></code></dd>
</dl>
</li>
</ul>
<a name="loadListProperties(java.util.List, java.lang.String, int, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadListProperties</h4>
<pre>public static&nbsp;int&nbsp;loadListProperties(java.util.List&nbsp;list,
                     java.lang.String&nbsp;configDir,
                     int&nbsp;show,
                     java.util.Map&nbsp;props)</pre>
<div class="block">It loads the property map from configDir for each string item of the
 given list and adds the property map to the given props. It only supports
 the config files with the extension of ".json". It returns the number
 of included configs upon success or -1 otherwise.</div>
</li>
</ul>
<a name="loadIncludedProperties(java.util.List, java.lang.String, int, java.util.Map, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>loadIncludedProperties</h4>
<pre>public static&nbsp;int&nbsp;loadIncludedProperties(java.util.List&nbsp;group,
                         java.lang.String&nbsp;cfgDir,
                         int&nbsp;show,
                         java.util.Map&nbsp;props,
                         java.util.Map&nbsp;policy)</pre>
<div class="block">It checks the loaded primay include on its ClassName for each string
 item of the given group. If its classname is defined as a key in the
 given policy map for 2nd includes, the value will be the name of the
 list that may contain items to be included secondarily. For each item
 to be included, the method will load its property map from cfgDir and
 merges it to its primary include loaded already to props. It only
 supports the config files with the extension of ".json". It returns the
 number of merged configs upon success or -1 otherwise.</div>
</li>
</ul>
<a name="query(org.qbroker.persister.MessagePersister, javax.jms.Message)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>query</h4>
<pre>public static&nbsp;java.lang.String&nbsp;query(<a href="../../../org/qbroker/persister/MessagePersister.html" title="interface in org.qbroker.persister">MessagePersister</a>&nbsp;pstr,
                     javax.jms.Message&nbsp;msg)</pre>
<div class="block">sends a query message via the given persister and waits for response.
 It returns null if sucessful.  Otherwise, error message is returned.
 This method is not efficient at all.  It is supposed to be used
 for ad hoc request.  The persister has to be fully initialized.
 The most of the persisters only support TextMessage or BytesMessage.</div>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">The configuration parameters are stored in the property file,
 Agent.json, that lists all monitorGroups, etc.
<br/><br/>
 Usage: java org.qbroker.flow.MonitorAgent [-?|-l|-I ConfigFile|...]
<br/></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - the command line arguments</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../org/qbroker/flow/MessageFlow.html" title="class in org.qbroker.flow"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../org/qbroker/flow/QClient.html" title="class in org.qbroker.flow"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?org/qbroker/flow/MonitorAgent.html" target="_top">Frames</a></li>
<li><a href="MonitorAgent.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
